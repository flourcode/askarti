<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>AskArti - Federal AI Sales Coach | Unblock Any Deal</title>
    <meta name="description" content="Get battle-tested federal sales tactics from AskArti. One question, complete solution. No fluff, just what works.">
    <meta name="keywords" content="federal sales, government contracting, sales coach, deal strategy, COTR, GSA, federal procurement">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
          theme: {
            extend: {
              colors: {
                primary: '#523f9e',
                customPurple: {
                  100: '#978bc4',
                  200: '#7465b1',
                  500: '#523f9e',
                  700: '#41327e',
                  900: '#31255e'
                }
              }
            }
          }
        }
    </script>
    <style>
        body { font-family: 'Inter', sans-serif; }
        .loader {
            border: 2px solid #e5e7eb;
            border-top: 2px solid #523f9e;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
        }
        .results-loader {
            border: 3px solid #e5e7eb;
            border-top: 3px solid #523f9e;
            border-radius: 50%;
            width: 32px;
            height: 32px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .modal-backdrop {
            transition: opacity 0.2s ease;
            opacity: 0;
        }
        .modal-backdrop.show { opacity: 1; }
        .modal-content {
            transition: transform 0.2s ease, opacity 0.2s ease;
            transform: scale(0.95);
            opacity: 0;
        }
        .modal-content.show {
            transform: scale(1);
            opacity: 1;
        }
        .prompt-btn {
            transition: all 0.2s ease;
            transform: translateY(0);
        }
        .prompt-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
        @keyframes successPulse {
            0% { box-shadow: 0 0 0 0 rgba(82, 63, 158, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(82, 63, 158, 0); }
            100% { box-shadow: 0 0 0 0 rgba(82, 63, 158, 0); }
        }
        .success-pulse { animation: successPulse 1.5s ease-out; }
        @keyframes errorShake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
            20%, 40%, 60%, 80% { transform: translateX(5px); }
        }
        .error-shake { animation: errorShake 0.6s ease-in-out; }
    </style>
</head>
<body class="bg-gray-50 text-gray-900">
    <div class="max-w-4xl mx-auto px-4 pt-4 pb-32">
        <header class="text-center mb-3">
            <div class="flex justify-center items-center gap-3 mb-1">
                <img src="images/arti_right.png" alt="AskArti Logo" class="w-12 h-12 md:w-16 md:h-16">
                <h1 class="text-3xl md:text-3xl font-bold text-gray-900 tracking-tight">Hi, I'm Arti!</h1>
            </div>
            <p class="text-md text-gray-600">Your Friendly Federal Sales Bot</p>
        </header>
        
        <main id="main-form" class="bg-white rounded-xl border border-gray-200 p-4 sm:p-6 mb-4 shadow-sm">
            <div class="space-y-3">
                <div>
                    <label for="situation-input" class="block text-sm font-medium text-gray-700 mb-1 text-center">
                        Hit me with your sales challenges and get actionable next steps for the win.
                    </label>
                    <textarea id="situation-input" rows="4" 
                        class="w-full p-3 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary resize-none placeholder-gray-400" 
                        placeholder="e.g., VA COTR loves our solution but Contracts says we need to be on SEWP V. We're only on GSA. Champion is getting promoted next month. $2M deal hanging."></textarea>
                </div>
            </div>
            
            <div class="text-xs text-center text-gray-500 mb-2 uppercase tracking-wider"><br>Common Federal Blockers</div>
<div id="canned-prompts" class="mt-4">
    <div class="flex flex-wrap justify-center gap-1.5">
        <button class="prompt-btn px-3 py-1.5 bg-customPurple-100/30 hover:bg-customPurple-100/50 rounded-full border border-customPurple-200/30 transition-colors text-sm text-customPurple-500 font-medium" 
            data-full-text="COTR says we need FedRAMP High but we only have Moderate. Deal worth $3M.">
            COTR says needs...
        </button>
        <button class="prompt-btn px-3 py-1.5 bg-customPurple-100/30 hover:bg-customPurple-100/50 rounded-full border border-customPurple-200/30 transition-colors text-sm text-customPurple-500 font-medium"
            data-full-text="Lost to incumbent on Best Value even though we scored higher technically. They said incumbent had lower risk.">
            Lost to incumbent...
        </button>
        <button class="prompt-btn px-3 py-1.5 bg-customPurple-100/30 hover:bg-customPurple-100/50 rounded-full border border-customPurple-200/30 transition-colors text-sm text-customPurple-500 font-medium"
            data-full-text="Customer wants our solution but we're only on GSA and they insist on using SEWP V. $5M opportunity.">
            Contract vehicle mismatch...
        </button>
        <button class="prompt-btn px-3 py-1.5 bg-customPurple-100/30 hover:bg-customPurple-100/50 rounded-full border border-customPurple-200/30 transition-colors text-sm text-customPurple-500 font-medium"
            data-full-text="Champion just got reassigned during the CR. New person doesn't know us. RFP drops in 60 days.">
            Champion reassigned during...
        </button>
        <button class="prompt-btn px-3 py-1.5 bg-customPurple-100/30 hover:bg-customPurple-100/50 rounded-full border border-customPurple-200/30 transition-colors text-sm text-customPurple-500 font-medium"
            data-full-text="Our partner (large SI) is taking all the credit and wants 40% margin for 'program management'. Customer thinks they're buying from them, not us.">
            Partner stealing credit...
        </button>
        <button class="prompt-btn px-3 py-1.5 bg-customPurple-100/30 hover:bg-customPurple-100/50 rounded-full border border-customPurple-200/30 transition-colors text-sm text-customPurple-500 font-medium"
            data-full-text="PM wants to sole source to us but Contracts says no J&A justification will work. Insists on competing it.">
            No sole source...
        </button>
        <button class="prompt-btn px-3 py-1.5 bg-customPurple-100/30 hover:bg-customPurple-100/50 rounded-full border border-customPurple-200/30 transition-colors text-sm text-customPurple-500 font-medium"
            data-full-text="If we win this $10M deal, incumbent will definitely protest. They have friends in Congress. CO is nervous.">
            Protest risk if...
        </button>
        <button class="prompt-btn px-3 py-1.5 bg-customPurple-100/30 hover:bg-customPurple-100/50 rounded-full border border-customPurple-200/30 transition-colors text-sm text-customPurple-500 font-medium"
            data-full-text="Preparing for AWS federal sales interview next week. Need to show federal experience selling cloud to DoD.">
            Prep for AWS...
        </button>
    </div>
</div>
        </main>

        <div class="fixed bottom-6 left-1/2 transform -translate-x-1/2 z-10">
            <button id="generate-btn" class="bg-customPurple-500 hover:bg-customPurple-700 text-white font-medium py-3 px-8 rounded-full transition-colors flex items-center gap-2 shadow-lg">
                <span id="btn-text">Get Solution</span>
                <div id="loader" class="loader hidden"></div>
            </button>
        </div>

        <div class="sponsor-banner text-center mb-3 py-2 px-3 bg-customPurple-100/20 rounded-lg border border-customPurple-100/40">
            <p class="text-xs text-gray-600" id="sponsor-text">
                <span class="text-customPurple-500 font-medium">Sponsored by:</span>
                <a href="https://subhoo.com" class="text-customPurple-500 hover:text-customPurple-700 font-medium underline">Subhoo.com</a> —
                <span id="sponsor-tagline">Helping you avoid teaming partners who still fax NDAs.</span>
                <button class="ml-2 text-gray-400 hover:text-gray-600" aria-label="Close sponsor banner">×</button>
            </p>
        </div>

        <div id="results-container"></div>

        <footer class="text-center pt-3">
            <div class="flex justify-center gap-6 text-sm mb-2">
                <button id="trust-btn" class="text-customPurple-500 hover:text-customPurple-700 font-medium">Privacy</button>
                <button id="sponsor-btn" class="text-customPurple-500 hover:text-customPurple-700 font-medium">Sponsor</button>
                <button id="human-btn" class="text-customPurple-500 hover:text-customPurple-700 font-medium">Connect</button>
                <button id="share-btn" class="text-customPurple-500 hover:text-customPurple-700 font-medium">Share</button>
            </div>
            <p class="text-xs text-gray-400">AskArti provides AI-generated federal sales coaching based on real-world tactics and scenarios. For educational purposes - use your judgment.</p>
            <br><br>
            <p class="text-xs text-gray-400">© 2025 AskArti. By federal sellers, for federal sellers.</p>
        </footer>
    </div>

    <!-- Keep existing modals as-is -->
    <div id="sponsor-modal" class="hidden fixed inset-0 bg-black/50 modal-backdrop flex items-center justify-center p-4 z-50">
        <!-- Existing sponsor modal content -->
    </div>
    <div id="human-modal" class="hidden fixed inset-0 bg-black/50 modal-backdrop flex items-center justify-center p-4 z-50">
        <!-- Existing human modal content -->
    </div>
    <div id="trust-modal" class="hidden fixed inset-0 bg-black/50 modal-backdrop flex items-center justify-center p-4 z-50">
        <!-- Existing trust modal content -->
    </div>

    <script>
        // Update sponsor taglines
        const taglines = [
            "Proudly brought to you by the same folks who've waited 6 months for a COTR signature.",
            "Brought to you by people who know what 'color of money' means.",
            "Helping you find partners who understand 'Q4 spending spree'.",
            "For sellers who've survived a continuing resolution... or three.",
            "Because even your capture manager doesn't know what DITCO-D means.",
            "Trusted by people still waiting for their SAM.gov registration."
        ];
        const tagline = taglines[Math.floor(Math.random() * taglines.length)];
        document.getElementById("sponsor-tagline").textContent = tagline;

        // DOM Elements
        const situationInput = document.getElementById('situation-input');
        const generateBtn = document.getElementById('generate-btn');
        const resultsContainer = document.getElementById('results-container');
        const btnText = document.getElementById('btn-text');
        const loader = document.getElementById('loader');
        
        let originalSituation = ""; 
        const API_ENDPOINT = 'https://nqux5cu205.execute-api.us-east-1.amazonaws.com/prod/AskArtiAPI';

        const showLoading = (isLoading) => {
            btnText.classList.toggle('hidden', isLoading);
            loader.classList.toggle('hidden', !isLoading);
            generateBtn.disabled = isLoading;
        };

        const fetchCoachingPlan = async (situation, scenario = null) => {
            let request_type = 'generate_one_shot_plan';
            let body = { request_type, situation };
            if (scenario) { body.scenario = scenario; }
            
            const response = await fetch(API_ENDPOINT, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(body)
            });
            
            if (!response.ok) throw new Error(`API Error: ${response.statusText}`);
            return await response.json();
        };

        const generatePlan = async () => {
            const situation = situationInput.value.trim();
            if (!situation) {
                resultsContainer.innerHTML = `<div class="text-center p-6 bg-red-50 border border-red-200 rounded-xl"><p class="text-red-700 font-medium">Describe your federal sales situation first.</p></div>`;
                resultsContainer.firstChild.classList.add('error-shake');
                return;
            }
            
            originalSituation = situation; 
            showLoading(true);
            resultsContainer.innerHTML = '<div class="flex flex-col justify-center items-center py-16"><div class="results-loader mb-4"></div><p class="text-gray-500">Arti is analyzing your federal sales situation...</p></div>';
            window.scrollTo({ top: 0, behavior: 'smooth' });
            
            try {
                const planData = await fetchCoachingPlan(originalSituation);
                displayPlan(planData);
            } catch (error) {
                handleApiError(error);
            } finally {
                showLoading(false);
            }
        };
        
        const handleScenario = async (scenario, btn) => {
            btn.disabled = true;
            const originalHtml = btn.innerHTML;
            btn.innerHTML = `<div class="flex items-center gap-2"><div class="loader"></div><span>Recalculating...</span></div>`;
            document.querySelectorAll('.scenario-btn').forEach(b => b.disabled = true);
            
            try {
                resultsContainer.innerHTML = '<div class="flex flex-col justify-center items-center py-16"><div class="results-loader mb-4"></div><p class="text-gray-500">Arti is recalculating based on new intel...</p></div>';
                const planData = await fetchCoachingPlan(originalSituation, scenario);
                displayPlan(planData);
            } catch (error) {
                handleApiError(error);
            } finally {
                btn.innerHTML = originalHtml;
                document.querySelectorAll('.scenario-btn').forEach(b => b.disabled = false);
            }
        };

		const handleRedTeamReview = async (btn) => {
    btn.disabled = true;
    btn.innerHTML = `<div class="flex items-center gap-2"><div class="loader"></div><span>Finding vulnerabilities...</span></div>`;
    
    try {
        const response = await fetch(API_ENDPOINT, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({
                request_type: 'red_team_review',
                situation: originalSituation,
            })
        });
        
        if (!response.ok) throw new Error(`API Error: ${response.statusText}`);
        const redTeamData = await response.json();
        
        // Add error checking for the response
        if (!redTeamData.devils_advocate_angle || !redTeamData.competitor_attack_vector) {
            throw new Error('Invalid red team response');
        }
        
        const reviewContainer = document.getElementById('red-team-review-container');
        reviewContainer.innerHTML = `
            <div class="bg-white rounded-xl border border-gray-200 overflow-hidden">
                <div class="bg-red-50 border-b border-red-200 p-4">
                    <h3 class="font-semibold text-red-900 flex items-center gap-2">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
                        </svg>
                        Deal Vulnerabilities
                    </h3>
                </div>
                <div class="p-4 space-y-4">
                    <div class="p-4 bg-red-50 rounded-xl border border-red-100">
                        <h4 class="font-medium text-gray-900 mb-2">Why Contracting Will Kill This</h4>
                        <p class="text-gray-700 text-sm">${redTeamData.devils_advocate_angle}</p>
                    </div>
                    <div class="p-4 bg-orange-50 rounded-xl border border-orange-100">
                        <h4 class="font-medium text-gray-900 mb-2">How Competitors Will Attack</h4>
                        <p class="text-gray-700 text-sm">${redTeamData.competitor_attack_vector}</p>
                    </div>
                </div>
            </div>`;
        btn.style.display = 'none';
    } catch (error) {
        console.error('Red Team Error:', error);
        // Show error message to user
        const reviewContainer = document.getElementById('red-team-review-container');
        reviewContainer.innerHTML = `
            <div class="bg-red-50 rounded-xl border border-red-100 p-4">
                <p class="text-red-700 text-sm">Failed to analyze vulnerabilities. Please try again.</p>
            </div>`;
        btn.innerHTML = 'Find Deal Killers';
        btn.disabled = false;
    }
};
        const handleCannedPrompt = (e) => {
            const button = e.currentTarget;
            situationInput.value = button.textContent.trim();
            setTimeout(() => {
                generateBtn.click();
            }, 200);
        };

        const displayPlan = (planData) => {
            const coachingPlan = planData.coaching_plan;
            const recommendation = planData.high_level_recommendation;
            
            const colors = [
                { bg: 'bg-customPurple-100/20', border: 'border-customPurple-100/40', text: 'text-customPurple-900', icon: 'bg-customPurple-500' },
                { bg: 'bg-customPurple-100/20', border: 'border-customPurple-100/40', text: 'text-customPurple-900', icon: 'bg-customPurple-700' },
                { bg: 'bg-customPurple-100/20', border: 'border-customPurple-100/40', text: 'text-customPurple-900', icon: 'bg-customPurple-500' },
                { bg: 'bg-customPurple-100/20', border: 'border-customPurple-100/40', text: 'text-customPurple-900', icon: 'bg-customPurple-700' }
            ];
            
            const personaCardsHTML = coachingPlan.map((personaData, index) => {
                const color = colors[index % colors.length];
                const talkingPointsHTML = personaData.talking_points.map(point => 
                    `<li class="flex items-start gap-2 mb-2">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-customPurple-500 mt-0.5 flex-shrink-0" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="text-gray-700">${point}</span>
                    </li>`
                ).join('');
                
                const snippetHTML = `
                    <div class="mt-4 pt-4 border-t border-gray-200">
                        <h3 class="font-medium text-gray-900 mb-2 flex items-center gap-2">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-gray-400" viewBox="0 0 20 20" fill="currentColor">
                                <path d="M8 2a1 1 0 000 2h2a1 1 0 100-2H8z" />
                                <path d="M3 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v6h-4.586l1.293-1.293a1 1 0 00-1.414-1.414l-3 3a1 1 0 000 1.414l3 3a1 1 0 001.414-1.414L10.414 13H15v3a2 2 0 01-2 2H5a2 2 0 01-2-2V5z" />
                            </svg>
                            Copy/Paste Template
                        </h3>
                        <div class="relative bg-gray-50 p-3 rounded-lg border border-gray-200">
                            <p class="text-sm text-gray-700 snippet-text">${personaData.suggested_snippet}</p>
                            <button class="copy-snippet-btn absolute top-2 right-2 p-1.5 bg-white/50 hover:bg-gray-200/80 rounded-full transition-colors" 
                                data-text="${personaData.suggested_snippet}" title="Copy Template">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-gray-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
                                </svg>
                            </button>
                        </div>
                    </div>
                `;

                return `
                    <div class="persona-card bg-white rounded-xl border border-gray-200 p-6 shadow-sm hover:shadow-md transition-shadow">
                        <div class="flex items-start gap-3 mb-4">
                            <div class="${color.icon} w-10 h-10 rounded-xl text-white flex-shrink-0 flex items-center justify-center">
                                <span class="font-bold">${personaData.persona.charAt(0)}</span>
                            </div>
                            <h2 class="text-xl font-semibold text-gray-900 break-words">${personaData.persona}</h2>
                        </div>
                        <div class="space-y-4">
                            <div class="${color.bg} ${color.border} border p-4 rounded-xl">
                                <h3 class="font-medium text-customPurple-700 mb-2">Next 72 Hours</h3>
                                <p class="text-gray-700">${personaData.smart_goal}</p>
                            </div>
                            <div>
                                <h3 class="font-medium text-gray-900 mb-3">Exact Tactics</h3>
                                <ul class="space-y-1">${talkingPointsHTML}</ul>
                            </div>
                            ${snippetHTML}
                        </div>
                    </div>
                `;
            }).join('');

            resultsContainer.innerHTML = `
                <div id="coaching-plan-container" class="space-y-8">
                    <div class="bg-customPurple-100/20 p-5 rounded-xl shadow-md success-pulse">
                        <div class="relative">
                            <img src="images/arti_right.png" alt="Arti" class="absolute top-0 left-0 h-10 w-10 flex-shrink-0">
                            <div class="pl-14">
                                <h3 class="text-lg font-semibold mb-1.5">Here's the play...</h3>
                                <p class="text-gray-800">${recommendation}</p>
                            </div>
                        </div>
                    </div>
                    <div class="space-y-6">${personaCardsHTML}</div>
                </div>
                
                <div class="mt-12 bg-white rounded-xl border border-gray-200 p-6 shadow-sm">
                    <h3 class="text-xl font-semibold text-gray-900 mb-2">Stress Test Your Strategy</h3>
                    <p class="text-gray-600 text-sm mb-6">What curveballs might kill this deal?</p>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                        <button class="scenario-btn text-left p-4 bg-customPurple-100/20 hover:bg-customPurple-100/40 rounded-xl border border-customPurple-100/40 transition-colors shadow-sm hover:shadow" 
                            data-scenario="Continuing Resolution hits - all new contracts frozen">
                            <div class="flex items-center gap-3">
                                <div class="w-8 h-8 bg-customPurple-500 rounded-xl flex items-center justify-center">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-white" viewBox="0 0 20 20" fill="currentColor">
                                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd" />
                                    </svg>
                                </div>
                                <span class="font-medium text-customPurple-700">CR freezes everything</span>
                            </div>
                        </button>
                        <button class="scenario-btn text-left p-4 bg-customPurple-100/20 hover:bg-customPurple-100/40 rounded-xl border border-customPurple-100/40 transition-colors shadow-sm hover:shadow" 
                            data-scenario="SBA protests - says this should be small business set-aside">
                            <div class="flex items-center gap-3">
                                <div class="w-8 h-8 bg-customPurple-500 rounded-xl flex items-center justify-center">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-white" viewBox="0 0 20 20" fill="currentColor">
                                        <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd" />
                                    </svg>
                                </div>
                                <span class="font-medium text-customPurple-700">Small business protest</span>
                            </div>
                        </button>
                        <button class="scenario-btn text-left p-4 bg-customPurple-100/20 hover:bg-customPurple-100/40 rounded-xl border border-customPurple-100/40 transition-colors shadow-sm hover:shadow" 
                            data-scenario="Champion gets detailed to another agency for 6 months">
                            <div class="flex items-center gap-3">
                                <div class="w-8 h-8 bg-customPurple-500 rounded-xl flex items-center justify-center">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-white" viewBox="0 0 20 20" fill="currentColor">
                                        <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-6-3a2 2 0 11-4 0 2 2 0 014 0zm-2 4a5 5 0 00-4.546 2.916A5.986 5.986 0 0010 16a5.986 5.986 0 004.546-2.084A5 5 0 0010 11z" clip-rule="evenodd" />
                                    </svg>
                                </div>
                                <span class="font-medium text-customPurple-700">Champion detailed out</span>
                            </div>
							</button>
                       <button class="scenario-btn text-left p-4 bg-customPurple-100/20 hover:bg-customPurple-100/40 rounded-xl border border-customPurple-100/40 transition-colors shadow-sm hover:shadow" 
                           data-scenario="IG audit finds we need higher security certification">
                           <div class="flex items-center gap-3">
                               <div class="w-8 h-8 bg-customPurple-500 rounded-xl flex items-center justify-center">
                                   <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-white" viewBox="0 0 20 20" fill="currentColor">
                                       <path fill-rule="evenodd" d="M4 4a2 2 0 00-2 2v4a2 2 0 002 2V6h10a2 2 0 00-2-2H4zm2 6a2 2 0 012-2h8a2 2 0 012 2v4a2 2 0 01-2 2H8a2 2 0 01-2-2v-4zm6 4a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd" />
                                   </svg>
                               </div>
                               <span class="font-medium text-customPurple-700">IG demands higher cert</span>
                           </div>
                       </button>
                   </div>
                   <div id="red-team-review-container">
                       <button id="red-team-btn" class="w-full bg-red-600 hover:bg-red-700 text-white font-medium py-3 px-4 rounded-xl transition-colors flex items-center justify-center gap-2 shadow-sm hover:shadow">
                           Find Deal Killers
                       </button>
                   </div>
               </div>
               
               <div class="mt-8 flex flex-col sm:flex-row gap-3">
                   <button id="copy-btn" class="flex-1 bg-customPurple-500 hover:bg-customPurple-700 text-white font-medium py-3 px-4 rounded-xl transition-colors flex items-center justify-center gap-2 shadow-sm hover:shadow">
                       <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                           <path d="M8 2a1 1 0 000 2h2a1 1 0 100-2H8z" />
                           <path d="M3 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v6h-4.586l1.293-1.293a1 1 0 00-1.414-1.414l-3 3a1 1 0 000 1.414l3 3a1 1 0 001.414-1.414L10.414 13H15v3a2 2 0 01-2 2H5a2 2 0 01-2-2V5zM15 11h2a1 1 0 110 2h-2v-2z" />
                       </svg>
                       Copy Full Strategy
                   </button>
                   <button id="reset-btn" class="flex-1 bg-white hover:bg-gray-50 text-gray-700 font-medium py-3 px-4 rounded-xl border border-gray-200 transition-colors flex items-center justify-center gap-2 shadow-sm hover:shadow">
                       <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-500" viewBox="0 0 20 20" fill="currentColor">
                           <path fill-rule="evenodd" d="M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z" clip-rule="evenodd" />
                       </svg>
                       New Situation
                   </button>
               </div>
           `;
           
           // Set up event listeners for dynamically created elements
           document.getElementById('reset-btn').addEventListener('click', resetForm);
           document.getElementById('copy-btn').addEventListener('click', copyPlanToClipboard);
           document.getElementById('red-team-btn').addEventListener('click', (e) => handleRedTeamReview(e.currentTarget));
           document.querySelectorAll('.scenario-btn').forEach(btn => {
               btn.addEventListener('click', (e) => handleScenario(e.currentTarget.dataset.scenario, e.currentTarget));
           });
           document.querySelectorAll('.copy-snippet-btn').forEach(btn => {
               btn.addEventListener('click', copySnippet);
           });
       };

       const resetForm = () => {
           situationInput.value = '';
           originalSituation = '';
           resultsContainer.innerHTML = '';
           window.scrollTo({ top: 0, behavior: 'smooth' });
       };
       
       const handleApiError = (error) => {
           console.error("API Error:", error);
           resultsContainer.innerHTML = `
               <div class="text-center p-8 bg-red-50 border border-red-200 rounded-xl">
                   <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 mx-auto text-red-500 mb-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                       <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                   </svg>
                   <p class="text-red-700 font-medium">Something went wrong</p>
                   <p class="text-red-600 text-sm mt-1">Try again - the AI might be overloaded</p>
               </div>`;
           resultsContainer.firstChild.classList.add('error-shake');
       };

       const copyPlanToClipboard = () => {
           const planContainer = document.getElementById('coaching-plan-container');
           if (!planContainer) return;
           
           const recommendation = planContainer.querySelector('.bg-customPurple-100\\/20 .pl-14 p').textContent.trim();
           let fullText = `ARTI'S FEDERAL SALES SOLUTION\n\n${recommendation}\n\n--- TACTICAL PLAN ---\n\n`;
           
           const personaCards = document.querySelectorAll('.persona-card');
           personaCards.forEach(card => {
               const persona = card.querySelector('h2').textContent.trim();
               const goal = card.querySelector('.border.p-4 p').textContent.trim();
               const points = Array.from(card.querySelectorAll('ul li span')).map(span => `- ${span.textContent.trim()}`).join('\n');
               const snippet = card.querySelector('.snippet-text')?.textContent.trim() || 'No template available.';
               
               fullText += `--- ${persona.toUpperCase()} ---\n\n`;
               fullText += `NEXT 72 HOURS:\n${goal}\n\n`;
               fullText += `EXACT TACTICS:\n${points}\n\n`;
               fullText += `COPY/PASTE TEMPLATE:\n${snippet}\n\n`;
           });
           
           navigator.clipboard.writeText(fullText.trim()).then(() => {
               const copyBtn = document.getElementById('copy-btn');
               const originalHtml = copyBtn.innerHTML;
               copyBtn.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" /></svg>Copied!`;
               copyBtn.classList.add('success-pulse');
               setTimeout(() => { 
                   copyBtn.innerHTML = originalHtml; 
                   copyBtn.classList.remove('success-pulse');
               }, 2000);
           });
       };

       const copySnippet = (e) => {
           const button = e.currentTarget;
           const textToCopy = button.dataset.text;
           navigator.clipboard.writeText(textToCopy).then(() => {
               const originalIcon = button.innerHTML;
               button.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-customPurple-500" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" /></svg>`;
               setTimeout(() => { button.innerHTML = originalIcon; }, 2000);
           });
       };

       const handleShare = () => {
           const shareText = "Just got tactical federal sales advice from AskArti. This thing actually knows how federal works.";
           const shareUrl = window.location.href;
           const fullShareText = `${shareText} ${shareUrl}`;
           
           if (navigator.share) {
               navigator.share({
                   title: 'AskArti - Elite Federal Sales Coach',
                   text: shareText,
                   url: shareUrl
               });
           } else {
               navigator.clipboard.writeText(fullShareText).then(() => {
                   const shareBtn = document.getElementById('share-btn');
                   const originalText = shareBtn.textContent;
                   shareBtn.textContent = 'Copied!';
                   setTimeout(() => {
                       shareBtn.textContent = originalText;
                   }, 2000);
               });
           }
       };
       
       const openModal = (modal, content) => {
           modal.classList.remove('hidden');
           setTimeout(() => {
               modal.classList.add('show');
               content.classList.add('show');
           }, 10);
       };
       
       const closeModal = (modal, content) => {
           modal.classList.remove('show');
           content.classList.remove('show');
           setTimeout(() => { modal.classList.add('hidden'); }, 200);
       };

       // Event Listeners
       generateBtn.addEventListener('click', generatePlan);
       document.querySelectorAll('.prompt-btn').forEach(btn => {
           btn.addEventListener('click', handleCannedPrompt);
       });
       
       // Keep all existing modal event listeners
       
       // Share button event listener
       document.getElementById('share-btn').addEventListener('click', handleShare);

       // Enter key submits
       situationInput.addEventListener('keydown', (e) => {
           if (e.key === 'Enter' && !e.shiftKey) {
               e.preventDefault();
               generateBtn.click();
           }
       });
   </script>
</body>
</html>