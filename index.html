<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AskArti - Your Fed Sales Strategist</title>
    
    <meta name="description" content="When your customer ghosts you and your boss wants impossible quota. Real federal sales advice that actually works.">
    <link rel="canonical" href="https://askarti.com">
    <link rel="icon" href="/images/favicon.ico" sizes="any">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    
<style>
    /* Correctly sourced from index(14).html */
    :root {
        --color-purple-lightest: #f2f0f7;
        --color-purple-light: #dadaeb;
        --color-purple-mid-light: #bcbddc;
        --color-purple-mid: #9e9ac8;
        --color-purple-dark: #756bb1;
        --color-black: #252525;
        --color-white: #ffffff;
        --color-primary: var(--color-purple-dark);
        --color-primary-hover: var(--color-purple-mid);
        --color-background: var(--color-purple-lightest); 
        --color-surface: var(--color-white); 
        --color-text-primary: var(--color-black);
        --color-text-secondary: #525252;
        --color-text-muted: #737373;
        --color-border: var(--color-purple-light);
    }

    body { 
        font-family: 'Inter', sans-serif; 
        color: var(--color-text-primary);
        background-color: var(--color-background);
    }
    
    .loader { 
        border: 2px solid rgba(255, 255, 255, 0.3); 
        border-top: 2px solid var(--color-white); 
        border-radius: 50%; 
        width: 20px; 
        height: 20px; 
        animation: spin 1s linear infinite; 
    }
    
    @keyframes spin { 
        0% { transform: rotate(0deg); } 
        100% { transform: rotate(360deg); } 
    }
    
    .fade-in { animation: fadeIn 0.5s ease-in-out; }
    @keyframes fadeIn { 
        from { opacity: 0; transform: translateY(10px); } 
        to { opacity: 1; transform: translateY(0); } 
    }
    
    .prospect-card { 
        background-color: var(--color-surface); 
        border-radius: 1rem; 
        border: 1px solid var(--color-border); 
        padding: 1.5rem; 
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05); 
    }
    
    #prospect-btn {
        background-color: var(--color-primary);
        color: var(--color-white);
        font-weight: 600; padding: 0.75rem 2rem;
        border-radius: 9999px; transition: all 0.2s ease-in-out;
        display: inline-flex; align-items: center; gap: 0.5rem;
        box-shadow: 0 4px 14px rgba(0, 0, 0, 0.1);
    }

    #prospect-btn:hover:not(:disabled) {
        background-color: var(--color-primary-hover);
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(0, 0, 0, 0.12);
    }

    #prospect-btn:disabled {
        background-color: var(--color-purple-mid);
        cursor: not-allowed;
    }
    
    textarea { 
        font-size: 16px !important; 
        border: 1px solid var(--color-border);
        border-radius: 0.5rem;
    }
    textarea:focus {
        --tw-ring-color: var(--color-primary);
        border-color: var(--color-primary);
    }

    /* Magazine Report Styles from index(14).html */
    .magazine-report {
        max-width: 1200px; margin: 0 auto; line-height: 1.6;
        color: var(--color-text-primary);
    }
    .report-header {
        background: var(--color-surface); border: 1px solid var(--color-border);
        margin-bottom: 2.5rem; padding: 2rem 2.5rem;
    }
    .title-section h1 {
        font-size: 2.75rem; font-weight: 800; color: var(--color-text-primary);
        margin: 0 0 0.5rem 0; letter-spacing: -0.04em; line-height: 1.1;
    }
    .subtitle {
        font-size: 1.25rem; color: var(--color-text-secondary); margin: 0; font-weight: 500;
    }
    .executive-summary {
        background: var(--color-background); padding: 2rem;
        border: 1px solid var(--color-border);
    }
    .executive-summary h2 {
        font-size: 1.5rem; font-weight: 700; margin: 0 0 1rem 0;
        border-bottom: 2px solid var(--color-primary);
        padding-bottom: 0.75rem; display: inline-block;
    }
    .summary-content {
        color: var(--color-text-secondary); line-height: 1.7; font-size: 1.05rem;
    }
    
    .content-section {
        background: var(--color-surface); border: 1px solid var(--color-border);
        padding: 2.5rem; margin-bottom: 2.5rem;
    }
    .content-section h2 {
        font-size: 2.25rem; font-weight: 800; color: var(--color-text-primary);
        margin: 0 0 2rem 0; letter-spacing: -0.03em;
    }
    .subsection h3 {
        font-size: 1.5rem; font-weight: 700; color: var(--color-text-primary);
        margin: 0 0 1.5rem 0; letter-spacing: -0.02em; display: flex;
        align-items: center; gap: 0.75rem;
    }
    .subsection h3::before {
        content: ''; width: 1rem; height: 1rem;
        background: var(--color-primary); flex-shrink: 0;
    }
    
    /* Data Table for Partners */
    .data-table-container { border: 1px solid var(--color-border); overflow-x: auto; }
    .data-table { width: 100%; border-collapse: collapse; font-size: 0.875rem; }
    .data-table th {
        background: var(--color-background); padding: 1rem 1.25rem; text-align: left;
        font-weight: 700; color: var(--color-text-primary); text-transform: uppercase;
        letter-spacing: 0.05em; font-size: 0.75rem; border-bottom: 2px solid var(--color-border);
    }
    .data-table td {
        padding: 1rem 1.25rem; border-bottom: 1px solid var(--color-border);
        vertical-align: top; line-height: 1.5; color: var(--color-text-secondary);
    }
    .data-table tr:last-child td { border-bottom: none; }
    .company-name {
        font-weight: 600; color: var(--color-text-primary);
        margin-bottom: 0.25rem; font-size: 0.95rem;
    }
    
    /* Action List for Next Steps */
    .action-list { display: flex; flex-direction: column; gap: 1rem; }
    .action-item {
        display: flex; gap: 1.5rem; align-items: flex-start;
        background: var(--color-background); padding: 1.5rem;
        border: 1px solid var(--color-border);
    }
    .action-number {
        background: var(--color-primary); color: var(--color-white);
        width: 2.5rem; height: 2.5rem; display: flex;
        align-items: center; justify-content: center;
        font-weight: 700; font-size: 1rem; flex-shrink: 0;
    }
    .action-item .action-content {
        color: var(--color-text-secondary); margin: 0;
        line-height: 1.6; padding-top: 0.25rem;
    }
    
    /* Prose Content for Markdown */
    .prose-content { color: var(--color-text-secondary); line-height: 1.7; }
    .prose-content h1, .prose-content h2, .prose-content h3 { color: var(--color-text-primary); font-weight: 700; margin-top: 1.5rem; margin-bottom: 1rem; }
    .prose-content p { margin-bottom: 1rem; }
    .prose-content ul { list-style-type: disc; margin-left: 1.5rem; margin-bottom: 1rem;}
    .prose-content blockquote { border-left: 4px solid var(--color-primary); padding-left: 1rem; font-style: italic;}

</style>
</head>
<body class="text-gray-900">
   <div class="max-w-screen-lg mx-auto px-4 sm:px-6 lg:px-8 pt-4 pb-20">
       <header class="text-center mb-4">
           <img src="/images/asklite.png" alt="AskArti" class="h-16 w-auto md:h-20 lg:h-24 mx-auto">
           <p class="mt-2 text-lg font-semibold text-gray-700">Federal Sales Intelligence</p>
       </header>

       <main class="prospect-card mb-6">
           <div id="chat-history" class="mb-4">
                </div>
           <div class="border-t border-gray-200 pt-4">
               <textarea 
                   id="chat-input" 
                   rows="2" 
                   class="w-full p-3 text-base resize-none placeholder-gray-500"
                   placeholder="Describe your situation or challenge..."
                   maxlength="1000"></textarea>
               <div class="text-center mt-3">
                   <button id="prospect-btn">
                       <span id="btn-text">Get Strategic Intel</span>
                       <div id="loader" class="loader hidden"></div>
                   </button>
               </div>
           </div>
       </main>

       <div id="results-container"></div>

       <footer class="text-center mt-12 space-y-4 pb-8">
           <p class="text-xs text-gray-500">Â© 2025 AskArti. Strategic Federal Intelligence.</p>
       </footer>
   </div>
  
<script>
class AskArtiApp {
    constructor() {
        this.elements = {
            chatHistory: document.getElementById('chat-history'),
            chatInput: document.getElementById('chat-input'),
            prospectBtn: document.getElementById('prospect-btn'),
            btnText: document.getElementById('btn-text'),
            loader: document.getElementById('loader'),
            resultsContainer: document.getElementById('results-container'),
        };
        this.state = { 
            conversationHistory: [],
            isProcessing: false 
        };
        this.apiEndpoint = 'https://vd823jgh0a.execute-api.us-east-1.amazonaws.com/prod/AskArtiAPI';
        this.init();
    }

    init() {
        this.setupEventListeners();
        this.addMessageToUI("Welcome. I'm Arti, your federal sales strategist. Share your situation, and I'll provide a strategic analysis.", false);
    }

    setupEventListeners() {
        this.elements.prospectBtn.addEventListener('click', () => this.sendMessage());
        this.elements.chatInput.addEventListener('keydown', (e) => {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                this.sendMessage();
            }
        });
    }

    addMessageToUI(content, isUser) {
        const wrapper = document.createElement('div');
        wrapper.className = `flex mb-4 ${isUser ? 'justify-end' : 'justify-start'}`;
        
        const bubble = document.createElement('div');
        bubble.className = `rounded-lg px-4 py-2 max-w-lg ${isUser ? 'bg-purple-600 text-white' : 'bg-gray-200 text-gray-800'}`;
        bubble.innerHTML = marked.parse(content);
        
        wrapper.appendChild(bubble);
        this.elements.chatHistory.appendChild(wrapper);
        this.elements.chatHistory.scrollTop = this.elements.chatHistory.scrollHeight;
    }

    setLoading(loading) {
        this.elements.btnText.classList.toggle('hidden', loading);
        this.elements.loader.classList.toggle('hidden', !loading);
        this.elements.prospectBtn.disabled = loading;
    }

    showError(message) {
        this.elements.resultsContainer.innerHTML = `<div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative" role="alert"><strong class="font-bold">Error:</strong><span class="block sm:inline"> ${message}</span></div>`;
    }

    async sendMessage() {
        const message = this.elements.chatInput.value.trim();
        if (!message || this.state.isProcessing) return;

        this.state.isProcessing = true;
        this.setLoading(true);
        this.elements.resultsContainer.innerHTML = '';
        
        this.addMessageToUI(message, true);
        this.elements.chatInput.value = '';

        this.state.conversationHistory.push({ role: 'user', content: message });

        try {
            const response = await fetch(this.apiEndpoint, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    situation: message,
                    conversationHistory: this.state.conversationHistory
                })
            });
            
            if (!response.ok) throw new Error(`API request failed with status ${response.status}`);
            
            const data = await response.json();
            
            this.state.conversationHistory.push({ 
                role: 'assistant', 
                content: "Generated strategic plan." // Placeholder for history
            });
            
            this.displayResponse(data);

        } catch (error) {
            console.error('Error:', error);
            this.showError(error.message);
        } finally {
            this.state.isProcessing = false;
            this.setLoading(false);
        }
    }

    displayResponse(data) {
        if (data.response_type === 'analysis' && data.analysis_markdown) {
            this.displayAnalysisReport(data);
        } else {
            this.displayStrategicPlan(data);
        }
        
        this.elements.resultsContainer.scrollIntoView({ behavior: 'smooth', block: 'start' });
    }
    
    // New function to render 'analysis' type responses
    displayAnalysisReport(data) {
        const html = `
        <div class="magazine-report fade-in">
           <header class="report-header">
               <div class="title-section">
                   <h1>Strategic Analysis</h1>
                   <p class="subtitle">Generated from your query</p>
               </div>
            </header>
            <section class="content-section">
                <div class="prose-content">
                    ${marked.parse(data.analysis_markdown)}
                </div>
            </section>
        </div>
        `;
        this.elements.resultsContainer.innerHTML = html;
    }

    // New function to render 'plan' type responses using the target style
    displayStrategicPlan(data) {
        const { account_name, executive_summary, strategic_assessment, partner_ecosystem, next_steps } = data;
        
        const html = `
        <div class="magazine-report fade-in">
           <header class="report-header">
               <div class="title-section">
                   <h1>${account_name || 'Federal Strategic Plan'}</h1>
                   <p class="subtitle">Intelligence & Execution Plan</p>
               </div>
               ${executive_summary ? `
               <div class="executive-summary mt-8">
                   <h2>Executive Summary</h2>
                   <div class="summary-content">
                       <p>${executive_summary}</p>
                   </div>
               </div>` : ''}
           </header>

           ${strategic_assessment ? this.renderStrategicAssessment(strategic_assessment) : ''}
           ${partner_ecosystem ? this.renderPartnerEcosystem(partner_ecosystem) : ''}
           ${next_steps?.length ? this.renderActionPlan(next_steps) : ''}
       </div>
       `;
       this.elements.resultsContainer.innerHTML = html;
    }

    renderStrategicAssessment(assessment) {
        return `
            <section class="content-section">
                <h2>Strategic Assessment</h2>
                <div class="subsection">
                    <h3>Current State</h3>
                    <div class="prose-content"><p>${assessment.current_state || 'N/A'}</p></div>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div class="subsection">
                        <h3>Key Challenges</h3>
                        <ul class="list-disc list-inside prose-content">
                            ${assessment.key_challenges?.map(c => `<li>${c}</li>`).join('') || '<li>N/A</li>'}
                        </ul>
                    </div>
                    <div class="subsection">
                        <h3>Opportunities</h3>
                        <ul class="list-disc list-inside prose-content">
                            ${assessment.opportunities?.map(o => `<li>${o}</li>`).join('') || '<li>N/A</li>'}
                        </ul>
                    </div>
                </div>
            </section>`;
    }

    renderPartnerEcosystem(ecosystem) {
         return `
            <section class="content-section">
               <h2>Partner Ecosystem</h2>
                <div class="subsection">
                    <h3>Top Prime Contractors</h3>
                    ${ecosystem.top_prime_contractors?.length ? `
                    <div class="data-table-container">
                       <table class="data-table">
                           <thead><tr><th>Company & Rationale</th></tr></thead>
                           <tbody>
                               ${ecosystem.top_prime_contractors.map(si => `
                                   <tr><td><div class="company-name">${si}</div></td></tr>
                               `).join('')}
                           </tbody>
                       </table>
                   </div>` : '<p class="prose-content">No specific prime contractors identified.</p>'}
               </div>
               <div class="subsection">
                   <h3>Potential ISV Partners</h3>
                    ${ecosystem.potential_isv_partners?.length ? `
                    <div class="data-table-container">
                       <table class="data-table">
                           <thead><tr><th>Company & Rationale</th></tr></thead>
                           <tbody>
                               ${ecosystem.potential_isv_partners.map(isv => `
                                   <tr><td><div class="company-name">${isv}</div></td></tr>
                               `).join('')}
                           </tbody>
                       </table>
                   </div>` : '<p class="prose-content">No specific ISV partners identified.</p>'}
               </div>
                <div class="subsection">
                    <h3>Competitive Landscape</h3>
                    <div class="prose-content"><p>${ecosystem.competitive_landscape || 'N/A'}</p></div>
                </div>
            </section>`;
    }
    
    renderActionPlan(steps) {
        return `
            <section class="content-section">
               <h2>Tactical Execution Plan</h2>
               <div class="action-list">
                   ${steps.map((step, i) => `
                       <div class="action-item">
                           <span class="action-number">${String(i + 1).padStart(2, '0')}</span>
                           <div class="action-content">
                                <strong>${step.action} (${step.priority} Priority)</strong>
                                <p>${step.rationale}</p>
                                <em class="text-sm">Timeline: ${step.timeline}</em>
                           </div>
                       </div>
                   `).join('')}
               </div>
           </section>`;
    }
}

document.addEventListener('DOMContentLoaded', () => {
    new AskArtiApp();
});
</script>
</body>
</html>