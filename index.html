<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AskArti - Your 24/7 Sales Buddy</title>
    <meta name="description" content="Get personalized federal sales advice from AskArti. Free AI tool provides SMART goals, customer messaging, and deal strategies for government contractors and sales professionals.">
    <link rel="canonical" href="https://askarti.com">
    <link rel="icon" href="/images/favicon.ico" sizes="any">
    <link rel="apple-touch-icon" href="/images/apple-touch-icon.png">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-WLGEPY5H4G"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-WLGEPY5H4G');
    </script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#7C6BBE',
                        customPurple: {
                            100: '#E8E4F7',
                            200: '#D8D2EF',
                            500: '#7C6BBE',
                            700: '#5A4E8C',
                            900: '#403866'
                        }
                    }
                }
            }
        }
    </script>
    <style>
        body { font-family: 'Inter', sans-serif; }
        .loader {
            border: 2px solid #e5e7eb;
            border-top: 2px solid #7C6BBE;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .fade-in { animation: fadeIn 0.5s ease-in-out; }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .quick-prompt:hover {
            background-color: rgba(124, 107, 190, 0.1);
            transform: scale(1.02);
        }
        .dashboard-card {
            background-color: white;
            border-radius: 0.75rem;
            border: 1px solid #e5e7eb;
            padding: 1.5rem;
            box-shadow: 0 1px 2px 0 rgb(0 0 0 / 0.05);
        }
        .mermaid { text-align: center; }
    </style>
</head>
<body class="bg-gray-50 text-gray-900">
    <div class="max-w-screen-lg mx-auto px-4 sm:px-6 lg:px-8 pt-4 pb-20">
        <header class="text-center mb-4">
            <a href="/" aria-label="AskArti Home"><img src="/images/asklite.png" alt="AskArti" class="h-16 w-auto md:h-20 lg:h-24 mx-auto"></a>
        </header>

        <main class="dashboard-card mb-3">
            <div class="mb-4">
                <label for="situation-input" class="block text-lg font-semibold text-gray-900 mb-2 text-center">
                    Hi, I'm Arti, your 24/7 Sales Buddy. What's blocking your deal?
                </label>
                <textarea id="situation-input" rows="3" class="w-full p-4 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary resize-none placeholder-gray-500" placeholder="Champion ghosted me after seeing pricing. $2M deal at DHS. Q4 commit." maxlength="2000"></textarea>
                <div class="text-xs text-gray-500 mt-1 flex justify-between items-center">
                    <span>More details yield better results.</span>
                    <span id="char-count">0/2000</span>
                </div>
            </div>
            <div class="flex flex-wrap gap-2 justify-center mb-4">
                <button class="quick-prompt px-3 py-1.5 bg-gray-100 hover:bg-gray-200 rounded-full text-sm text-gray-700 font-medium" data-text="Buyer at VA ghosted me after pricing. $1.5M cloud deal. CISO loves our competitor.">Buyer Went Dark</button>
                <button class="quick-prompt px-3 py-1.5 bg-gray-100 hover:bg-gray-200 rounded-full text-sm text-gray-700 font-medium" data-text="Meeting DHS CIO next week and don't have a Champion. How do I have a meeting that results in a sale?">Meeting Prep</button>
                <button class="quick-prompt px-3 py-1.5 bg-gray-100 hover:bg-gray-200 rounded-full text-sm text-gray-700 font-medium" data-text="AWS federal sales interview next week. Help me with the Leadership Principles. Help me prep.">Interview Prep</button>
                <button class="quick-prompt px-3 py-1.5 bg-gray-100 hover:bg-gray-200 rounded-full text-sm text-gray-700 font-medium" data-text="Prospect for janitorial services at the VA.">Prospecting</button>
            </div>
            <div class="text-center">
                <button id="ask-btn" class="bg-customPurple-500 hover:bg-customPurple-700 text-white font-semibold py-3 px-8 rounded-full transition-all inline-flex items-center gap-2 shadow-lg hover:shadow-xl">
                    <span id="btn-text">Ask Arti</span>
                    <div id="loader" class="loader hidden"></div>
                </button>
            </div>
        </main>

        <div id="loading-message" class="text-center py-4 text-gray-600 hidden"></div>
        <div id="error-message" class="bg-red-50 border border-red-200 rounded-lg p-6 text-center mb-4 hidden"></div>
        <div id="results-container"></div>

        <footer class="text-center mt-12 space-y-4">
            </footer>
    </div>
    
    <script>
document.addEventListener('DOMContentLoaded', () => {
    // --- CONFIGURATION ---
    const API_ENDPOINT = 'https://vd823jgh0a.execute-api.us-east-1.amazonaws.com/prod/AskArtiAPI';
    const MAX_INPUT_LENGTH = 2000;
    const LOADING_MESSAGES = ["Working Backwards...", "Diving Deep...", "Thinking Big...", "Unpacking This..."];

    // --- DOM ELEMENTS ---
    const elements = {
        situationInput: document.getElementById('situation-input'),
        charCount: document.getElementById('char-count'),
        askBtn: document.getElementById('ask-btn'),
        btnText: document.getElementById('btn-text'),
        loader: document.getElementById('loader'),
        loadingMessage: document.getElementById('loading-message'),
        errorMessage: document.getElementById('error-message'),
        resultsContainer: document.getElementById('results-container'),
        quickPromptBtns: document.querySelectorAll('.quick-prompt')
    };

    // --- STATE ---
    let isLoading = false;
    let loadingInterval;

    // --- INITIALIZATION ---
    mermaid.initialize({ startOnLoad: false, theme: 'neutral', securityLevel: 'strict' });
    
    // --- FUNCTIONS ---
    const setLoading = (loading) => {
        isLoading = loading;
        elements.askBtn.disabled = loading;
        elements.btnText.style.display = loading ? 'none' : 'inline';
        elements.loader.style.display = loading ? 'block' : 'none';
        elements.errorMessage.classList.add('hidden');
        elements.resultsContainer.innerHTML = '';

        if (loading) {
            elements.loadingMessage.classList.remove('hidden');
            let i = 0;
            elements.loadingMessage.textContent = LOADING_MESSAGES[i];
            loadingInterval = setInterval(() => {
                i = (i + 1) % LOADING_MESSAGES.length;
                elements.loadingMessage.textContent = LOADING_MESSAGES[i];
            }, 2500);
        } else {
            elements.loadingMessage.classList.add('hidden');
            clearInterval(loadingInterval);
        }
    };

    const showError = (message) => {
        elements.errorMessage.textContent = message || 'An unexpected error occurred. Please try again.';
        elements.errorMessage.classList.remove('hidden');
    };

    const displayAdvice = (advice) => {
        const html = marked.parse(advice);
        elements.resultsContainer.innerHTML = `
            <div class="dashboard-card fade-in prose max-w-none">
                ${html}
            </div>`;
        
        // Find and render any mermaid diagrams
        const mermaidElements = elements.resultsContainer.querySelectorAll('.mermaid');
        if (mermaidElements.length > 0) {
            mermaid.run({ nodes: mermaidElements });
        }
    };

    const getAdvice = async () => {
        if (isLoading) return;
        
        const situation = elements.situationInput.value.trim();
        if (!situation) {
            showError("Please enter a situation in the text box.");
            return;
        }

        setLoading(true);

        try {
            const response = await fetch(API_ENDPOINT, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ situation })
            });

            if (!response.ok) {
                const errorData = await response.json();
                throw new Error(errorData.message || `Request failed with status: ${response.status}`);
            }

            const data = await response.json();
            displayAdvice(data.advice);

        } catch (error) {
            console.error('API Error:', error);
            showError(error.message);
        } finally {
            setLoading(false);
        }
    };

    // --- EVENT LISTENERS ---
    elements.askBtn.addEventListener('click', getAdvice);
    
    elements.situationInput.addEventListener('keydown', (e) => {
        if (e.key === 'Enter' && !e.shiftKey) {
            e.preventDefault();
            getAdvice();
        }
    });

    elements.situationInput.addEventListener('input', () => {
        const len = elements.situationInput.value.length;
        elements.charCount.textContent = `${len}/${MAX_INPUT_LENGTH}`;
    });

    elements.quickPromptBtns.forEach(btn => {
        btn.addEventListener('click', () => {
            elements.situationInput.value = btn.dataset.text;
            elements.charCount.textContent = `${btn.dataset.text.length}/${MAX_INPUT_LENGTH}`;
            getAdvice();
        });
    });
});
</script>
</body>
</html>