<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AskArti - Your AI Sales Buddy</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
          theme: {
            extend: {
              colors: {
                primary: '#2563eb',
                accent: {
                  pink: '#ec4899',
                  purple: '#8b5cf6',
                  yellow: '#f59e0b',
                  green: '#10b981',
                  blue: '#06b6d4',
                  orange: '#f97316'
                }
              }
            }
          }
        }
    </script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        
        .loader {
            border: 2px solid #e5e7eb;
            border-top: 2px solid #2563eb;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
        }
        
        .results-loader {
            border: 3px solid #e5e7eb;
            border-top: 3px solid #2563eb;
            border-radius: 50%;
            width: 32px;
            height: 32px;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .modal-backdrop {
            transition: opacity 0.2s ease;
            opacity: 0;
        }
        .modal-backdrop.show {
            opacity: 1;
        }
        .modal-content {
            transition: transform 0.2s ease, opacity 0.2s ease;
            transform: scale(0.95);
            opacity: 0;
        }
        .modal-content.show {
            transform: scale(1);
            opacity: 1;
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-900">

    <div class="max-w-4xl mx-auto px-4 py-8 pb-32">
    <header class="text-center mb-6">
        <div class="flex justify-center items-center gap-3 mb-1">
            <img src="images/arti_right.png" alt="AskArti Logo" class="w-12 h-12 md:w-16 md:h-16">
            <h1 class="text-3xl md:text-4xl font-bold text-gray-900 tracking-tight">Hi, I'm Arti!</h1>
        </div>
        <p class="text-md text-gray-600">Your friendly Federal Sales bot</p>
    </header>
    <main id="main-form" class="bg-white rounded-2xl border border-gray-200 p-8 mb-8">
        <div class="space-y-6">
    <div>
       <label for="situation-input" class="block text-sm font-medium text-gray-700 mb-2 text-center">Hit me with your sales challenges and get SMART goals and Customer messaging for the win.</label>
       <textarea id="situation-input" rows="5" class="w-full p-4 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary focus:border-primary resize-none" placeholder="e.g., Trying to sell cyber to DHS. The economic buyer is ghosting me. Their CIO loves our competitor. My boss thinks I don't know what I'm doing and they might be right."></textarea>
   </div>
</div>
            
            <div id="canned-prompts" class="mt-8">
    <div class="flex flex-wrap justify-center gap-2">
        <button class="prompt-btn px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-full border border-gray-200 transition-colors text-sm text-gray-700">
            Economic Buyer went dark.
        </button>
        <button class="prompt-btn px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-full border border-gray-200 transition-colors text-sm text-gray-700">
            RFP is wired for the incumbent.
        </button>
        <button class="prompt-btn px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-full border border-gray-200 transition-colors text-sm text-gray-700">
            Technical Buyer has security concerns.
        </button>
        <button class="prompt-btn px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-full border border-gray-200 transition-colors text-sm text-gray-700">
            New CIO loves our competitor.
        </button>
        <button class="prompt-btn px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-full border border-gray-200 transition-colors text-sm text-gray-700">
            My boss thinks I can't sell.
        </button>
    </div>
</div>
        </main>

        <div class="fixed bottom-6 left-1/2 transform -translate-x-1/2 z-10">
            <button id="generate-btn" class="bg-primary hover:bg-blue-700 text-white font-medium py-3 px-8 rounded-full transition-colors flex items-center gap-2 shadow-lg">
                <span id="btn-text">Ask Arti</span>
                <div id="loader" class="loader hidden"></div>
            </button>
        </div>
<div class="sponsor-banner text-center mb-6">
    <p class="text-xs text-gray-500">
        <span class="text-blue-600 font-medium">Sponsored by:</span>
        Find a Prime with mandatory Subcontracting requirements on  
        <a href="https://subhoo.com" class="text-blue-600 hover:text-blue-700 font-medium underline">Subhoo.com</a>
        <button class="ml-2 text-gray-400 hover:text-gray-600">Ã—</button>
    </p>
</div>
        <div id="results-container">
        </div>

        <footer class="text-center pt-8">
    <div class="flex justify-center gap-6 text-sm mb-4">
        <button id="trust-btn" class="text-primary hover:text-blue-700 font-medium">Privacy</button>
        <button id="sponsor-btn" class="text-primary hover:text-blue-700 font-medium">Sponsor</button>
        <button id="human-btn" class="text-primary hover:text-blue-700 font-medium">Connect</button>
        <button id="share-btn" class="text-primary hover:text-blue-700 font-medium">Share</button>
    </div>
    <p class="text-xs text-gray-400">AskArti provides AI-generated sales advice based on common methodologies and scenarios. This tool is for informational and educational purposes only and does not constitute professional business advice. AI can make errors or provide recommendations that may not suit your specific situation. Users should exercise their own judgment and consider consulting qualified professionals before making important business decisions.</p>
	<br><br>
	<p class="text-xs text-gray-400">Â© 2025 AskArti. Made with ðŸ–¤ for Federal Sellers.</p>
</footer>
    </div>

    <!-- Sponsor Modal -->
<div id="sponsor-modal" class="hidden fixed inset-0 bg-black/50 modal-backdrop flex items-center justify-center p-4 z-50">
    <div id="sponsor-modal-content" class="bg-white rounded-2xl shadow-xl w-full max-w-md modal-content">
        <header class="p-6 border-b border-gray-200 flex justify-between items-center">
            <h2 class="text-lg font-bold text-gray-900 flex items-center gap-2">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-primary" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
                Sponsor AskArti
            </h2>
            <button id="close-sponsor-modal-btn" class="text-gray-400 hover:text-gray-600">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                </svg>
            </button>
        </header>
        <main class="p-6 space-y-6 text-gray-700">
            <div class="flex items-start gap-4">
                <div class="flex-shrink-0 w-8 h-8 rounded-xl bg-blue-50 flex items-center justify-center">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" />
                    </svg>
                </div>
                <div>
                    <h3 class="font-semibold text-gray-900">Reach Federal Sales Professionals</h3>
                    <p class="text-sm mt-1 text-gray-600">Connect with IT sales reps, business development professionals, and decision-makers selling to federal agencies.</p>
                </div>
            </div>
            <div class="flex items-start gap-4">
                <div class="flex-shrink-0 w-8 h-8 rounded-xl bg-green-50 flex items-center justify-center">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-green-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                </div>
                <div>
                    <h3 class="font-semibold text-gray-900">Prime Placement & Clean Ads</h3>
                    <p class="text-sm mt-1 text-gray-600">Your non-intrusive text-based ads appear above results with monthly performance reports. Perfect for federal contractors, sales tools, and training providers.</p>
                </div>
            </div>
            <div class="flex items-start gap-4">
                <div class="flex-shrink-0 w-8 h-8 rounded-xl bg-purple-50 flex items-center justify-center">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-purple-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1" />
                    </svg>
                </div>
                <div>
                    <h3 class="font-semibold text-gray-900">$299/month</h3>
                    <p class="text-sm mt-1 text-gray-600">Help cover infrastructure costs and reach this engaged federal sales community. Annual discounts available.</p>
                </div>
            </div>
            <div class="border-t border-gray-200 pt-4">
                <a href="mailto:mark@subhoo.com?subject=AskArti Sponsorship Inquiry" class="w-full inline-flex items-center justify-center gap-2 bg-primary hover:bg-blue-700 text-white font-medium py-3 px-4 rounded-xl transition-colors">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
                    </svg>
                    Get Started - mark@subhoo.com
                </a>
            </div>
        </main>
    </div>
</div>
<!-- Human Consultation Modal -->
<div id="human-modal" class="hidden fixed inset-0 bg-black/50 modal-backdrop flex items-center justify-center p-4 z-50">
    <div id="human-modal-content" class="bg-white rounded-2xl shadow-xl w-full max-w-md modal-content">
        <header class="p-6 border-b border-gray-200 flex justify-between items-center">
            <h2 class="text-lg font-bold text-gray-900 flex items-center gap-2">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-primary" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" />
                </svg>
                Hi, I'm Mark, creator of AskArti.
            </h2>
            <button id="close-human-modal-btn" class="text-gray-400 hover:text-gray-600">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                </svg>
            </button>
        </header>
        <main class="p-6 space-y-6 text-gray-700">
            <div class="flex items-start gap-4">
                <div class="flex-shrink-0 w-8 h-8 rounded-xl bg-blue-50 flex items-center justify-center">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                    </svg>
                </div>
                <div>
                    <h3 class="font-semibold text-gray-900">I've Been There</h3>
                    <p class="text-sm mt-1 text-gray-600">With 30+ years in federal sales at AWS, Red Hat, F5, and Western Digital, I know sometimes you need human insight for complex deals.</p>
                </div>
            </div>
            <div class="flex items-start gap-4">
                <div class="flex-shrink-0 w-8 h-8 rounded-xl bg-green-50 flex items-center justify-center">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-green-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                    </svg>
                </div>
                <div>
                    <h3 class="font-semibold text-gray-900">Strategy & Deal Reviews</h3>
                    <p class="text-sm mt-1 text-gray-600">Get help with deal strategy, GTM planning, competitive positioning, or just talk through what's blocking your federal sales.</p>
                </div>
            </div>
            <div class="flex items-start gap-4">
                <div class="flex-shrink-0 w-8 h-8 rounded-xl bg-purple-50 flex items-center justify-center">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-purple-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                </div>
                <div>
                    <h3 class="font-semibold text-gray-900">Free 30-Minute Intro Call</h3>
                    <p class="text-sm mt-1 text-gray-600">No strings attached. Just a conversation about your federal sales challenges and how I might be able to help.</p>
                </div>
            </div>
            <div class="border-t border-gray-200 pt-4">
                <a href="https://calendly.com/markflournoy/30min" target="_blank" class="w-full inline-flex items-center justify-center gap-2 bg-primary hover:bg-blue-700 text-white font-medium py-3 px-4 rounded-xl transition-colors">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                    </svg>
                    Schedule Free Call
                </a>
            </div>
        </main>
    </div>
</div>
    <div id="trust-modal" class="hidden fixed inset-0 bg-black/50 modal-backdrop flex items-center justify-center p-4 z-50">
        <div id="trust-modal-content" class="bg-white rounded-2xl shadow-xl w-full max-w-md modal-content">
            <header class="p-6 border-b border-gray-200 flex justify-between items-center">
                <h2 class="text-lg font-bold text-gray-900 flex items-center gap-2">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-primary" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z" />
                    </svg>
                    Trust & Safety
                </h2>
                <button id="close-trust-modal-btn" class="text-gray-400 hover:text-gray-600">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                </button>
            </header>
            <main class="p-6 space-y-6 text-gray-700">
                <div class="flex items-start gap-4">
                    <div class="flex-shrink-0 w-8 h-8 rounded-xl bg-blue-50 flex items-center justify-center">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z" />
                        </svg>
                    </div>
                    <div>
                        <h3 class="font-semibold text-gray-900">Your Data is Private</h3>
                        <p class="text-sm mt-1 text-gray-600">Your prompts are sent directly to the AI model for processing and are not stored on our servers.</p>
                    </div>
                </div>
                <div class="flex items-start gap-4">
                    <div class="flex-shrink-0 w-8 h-8 rounded-xl bg-green-50 flex items-center justify-center">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-green-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v6a2 2 0 002 2h14a2 2 0 002-2v-6a2 2 0 00-2-2m-2-4h.01M17 16h.01" />
                        </svg>
                    </div>
                    <div>
                        <h3 class="font-semibold text-gray-900">AI Model Information</h3>
                        <p class="text-sm mt-1 text-gray-600">AskArti uses Google's Gemini 1.5 AI Model. Google may use API inputs to improve its models.</p>
                    </div>
                </div>
                <div class="flex items-start gap-4">
                    <div class="flex-shrink-0 w-8 h-8 rounded-xl bg-purple-50 flex items-center justify-center">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-purple-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                        </svg>
                    </div>
                    <div>
                        <h3 class="font-semibold text-gray-900">How Recommendations Work</h3>
                        <p class="text-sm mt-1 text-gray-600">AskArti provides AI-generated sales advice based on common methodologies and scenarios. This tool is for informational and educational purposes only and does not constitute professional business advice. AI can make errors or provide recommendations that may not suit your specific situation. Users should exercise their own judgment and consider consulting qualified professionals before making important business decisions.</p>
                    </div>
                </div>
                <div class="border-t border-gray-200 pt-4">
                    <p class="text-sm text-gray-500">Questions? Contact us at <a href="mailto:mark@subhoo.com" class="text-primary hover:underline">mark@subhoo.com</a></p>
                </div>
            </main>
        </div>
    </div>
<script>
        // --- DOM Elements ---
        const situationInput = document.getElementById('situation-input');
        const generateBtn = document.getElementById('generate-btn');
        const resultsContainer = document.getElementById('results-container');
        const btnText = document.getElementById('btn-text');
        const loader = document.getElementById('loader');
        
        const trustBtn = document.getElementById('trust-btn');
        const trustModal = document.getElementById('trust-modal');
        const trustModalContent = document.getElementById('trust-modal-content');
        const closeTrustModalBtn = document.getElementById('close-trust-modal-btn');

        const sponsorBtn = document.getElementById('sponsor-btn');
        const sponsorModal = document.getElementById('sponsor-modal');
        const sponsorModalContent = document.getElementById('sponsor-modal-content');
        const closeSponsorModalBtn = document.getElementById('close-sponsor-modal-btn');
		
		const humanBtn = document.getElementById('human-btn');
		const humanModal = document.getElementById('human-modal');
		const humanModalContent = document.getElementById('human-modal-content');
		const closeHumanModalBtn = document.getElementById('close-human-modal-btn');

        let originalSituation = ""; 

        const API_ENDPOINT = 'https://nqux5cu205.execute-api.us-east-1.amazonaws.com/prod/AskArtiAPI';

        const showLoading = (isLoading) => {
            btnText.classList.toggle('hidden', isLoading);
            loader.classList.toggle('hidden', !isLoading);
            generateBtn.disabled = isLoading;
        };

        const fetchCoachingPlan = async (situation, scenario = null) => {
            let request_type = 'generate_one_shot_plan';
            let body = { request_type, situation };
            if (scenario) { body.scenario = scenario; }
            const response = await fetch(API_ENDPOINT, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(body)
            });
            if (!response.ok) throw new Error(`API Error: ${response.statusText}`);
            return await response.json();
        };

        const generatePlan = async () => {
            const situation = situationInput.value.trim();
            if (!situation) {
                resultsContainer.innerHTML = `<div class="text-center p-6 bg-red-50 border border-red-200 rounded-xl"><p class="text-red-700 font-medium">Please describe your sales problem first.</p></div>`;
                return;
            }
            originalSituation = situation; 
            showLoading(true);
            resultsContainer.innerHTML = '<div class="flex flex-col justify-center items-center py-16"><div class="results-loader mb-4"></div><p class="text-gray-500">Arti is analyzing your situation...</p></div>';
            window.scrollTo({ top: 0, behavior: 'smooth' });
            try {
                const planData = await fetchCoachingPlan(originalSituation);
                displayPlan(planData);
            } catch (error) {
                handleApiError(error);
            } finally {
                showLoading(false);
            }
        };
        
        const handleScenario = async (scenario, btn) => {
            btn.disabled = true;
            const originalHtml = btn.innerHTML;
            btn.innerHTML = `<div class="flex items-center gap-2"><div class="loader"></div><span>Rethinking...</span></div>`;
            document.querySelectorAll('.scenario-btn').forEach(b => b.disabled = true);
            try {
                 resultsContainer.innerHTML = '<div class="flex flex-col justify-center items-center py-16"><div class="results-loader mb-4"></div><p class="text-gray-500">Arti is rethinking the plan...</p></div>';
                const planData = await fetchCoachingPlan(originalSituation, scenario);
                displayPlan(planData);
            } catch (error) {
                handleApiError(error);
            } finally {
                btn.innerHTML = originalHtml;
                document.querySelectorAll('.scenario-btn').forEach(b => b.disabled = false);
            }
        };

        const handleRedTeamReview = async (btn) => {
            btn.disabled = true;
            btn.innerHTML = `<div class="flex items-center gap-2"><div class="loader"></div><span>Analyzing Weaknesses...</span></div>`;
            try {
                const response = await fetch(API_ENDPOINT, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        request_type: 'red_team_review',
                        situation: originalSituation,
                    })
                });
                if (!response.ok) throw new Error(`API Error: ${response.statusText}`);
                const redTeamData = await response.json();
                const reviewContainer = document.getElementById('red-team-review-container');
                reviewContainer.innerHTML = `
                    <div class="bg-white rounded-xl border border-gray-200 overflow-hidden">
                        <div class="bg-red-50 border-b border-red-200 p-4">
                            <h3 class="font-semibold text-red-900 flex items-center gap-2">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" /></svg>
                                Red Team Review
                            </h3>
                        </div>
                        <div class="p-4 space-y-4">
                            <div class="p-4 bg-red-50 rounded-xl border border-red-100"><h4 class="font-medium text-gray-900 mb-2">Skeptical Buyer's Angle</h4><p class="text-gray-700 text-sm">"${redTeamData.devils_advocate_angle}"</p></div>
                            <div class="p-4 bg-orange-50 rounded-xl border border-orange-100"><h4 class="font-medium text-gray-900 mb-2">Competitor's Attack Vector</h4><p class="text-gray-700 text-sm">"${redTeamData.competitor_attack_vector}"</p></div>
                        </div>
                    </div>`;
                btn.style.display = 'none';
            } catch (error) {
                handleApiError(error);
            }
        };
        
        const handleCannedPrompt = (e) => {
            const button = e.currentTarget;
            situationInput.value = button.textContent.trim();
            button.classList.add('bg-gray-200');
            setTimeout(() => {
                button.classList.remove('bg-gray-200');
                generateBtn.click();
            }, 200);
        };

        const displayPlan = (planData) => {
            const coachingPlan = planData.coaching_plan;
            const recommendation = planData.high_level_recommendation;
            const colors = [
                { bg: 'bg-blue-50', border: 'border-blue-200', text: 'text-blue-900', icon: 'bg-blue-500' },
                { bg: 'bg-purple-50', border: 'border-purple-200', text: 'text-purple-900', icon: 'bg-purple-500' },
                { bg: 'bg-green-50', border: 'border-green-200', text: 'text-green-900', icon: 'bg-green-500' },
                { bg: 'bg-orange-50', border: 'border-orange-200', text: 'text-orange-900', icon: 'bg-orange-500' }
            ];
            
            const personaCardsHTML = coachingPlan.map((personaData, index) => {
                const color = colors[index % colors.length];
                const talkingPointsHTML = personaData.talking_points.map(point => `<li class="flex items-start gap-2 mb-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-green-600 mt-0.5 flex-shrink-0" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" /></svg><span class="text-gray-700">${point}</span></li>`).join('');
                
                const snippetHTML = `
                    <div class="mt-4 pt-4 border-t border-gray-200">
                        <h3 class="font-medium text-gray-900 mb-2 flex items-center gap-2">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-gray-400" viewBox="0 0 20 20" fill="currentColor">
                                <path d="M8 2a1 1 0 000 2h2a1 1 0 100-2H8z" />
                                <path d="M3 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v6h-4.586l1.293-1.293a1 1 0 00-1.414-1.414l-3 3a1 1 0 000 1.414l3 3a1 1 0 001.414-1.414L10.414 13H15v3a2 2 0 01-2 2H5a2 2 0 01-2-2V5z" />
                            </svg>
                            Suggested Snippet
                        </h3>
                        <div class="relative bg-gray-50 p-3 rounded-lg border border-gray-200">
                            <p class="text-sm text-gray-700 snippet-text">${personaData.suggested_snippet}</p>
                            <button class="copy-snippet-btn absolute top-2 right-2 p-1.5 bg-white/50 hover:bg-gray-200/80 rounded-full transition-colors" data-text="${personaData.suggested_snippet}" title="Copy Snippet">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-gray-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" /></svg>
                            </button>
                        </div>
                    </div>
                `;

                return `
                    <div class="persona-card bg-white rounded-xl border border-gray-200 p-6">
                        <div class="flex items-center gap-3 mb-4">
                            <div class="${color.icon} w-10 h-10 rounded-xl text-white flex items-center justify-center"><span class="font-bold">${personaData.persona.charAt(0)}</span></div>
                            <h2 class="text-xl font-semibold text-gray-900">${personaData.persona}</h2>
                        </div>
                        <div class="space-y-4">
                            <div class="${color.bg} ${color.border} border p-4 rounded-xl">
                                <h3 class="font-medium ${color.text} mb-2">SMART Goal</h3>
                                <p class="text-gray-700">${personaData.smart_goal}</p>
                            </div>
                            <div>
                                <h3 class="font-medium text-gray-900 mb-3">Key Talking Points</h3>
                                <ul class="space-y-1">${talkingPointsHTML}</ul>
                            </div>
                            ${snippetHTML}
                        </div>
                    </div>
                `;
            }).join('');

            resultsContainer.innerHTML = `<div id="coaching-plan-container" class="space-y-8">
                <div class="bg-primary text-white p-6 rounded-xl">
                    <div class="flex items-start gap-4">
                        <div class="bg-white/20 rounded-xl p-2 flex-shrink-0"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M13 10V3L4 14h7v7l9-11h-7z" /></svg></div>
                        <div><h3 class="text-lg font-semibold mb-2">Strategic Recommendation</h3><p class="text-blue-100">${recommendation}</p></div>
                    </div>
                </div>
                <div class="space-y-6">${personaCardsHTML}</div>
            </div>
            <div class="mt-12 bg-white rounded-xl border border-gray-200 p-6">
                <h3 class="text-xl font-semibold text-gray-900 mb-2">Test Your Plan</h3>
                <p class="text-gray-600 text-sm mb-6">Prepare for different scenarios that might arise</p>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                    <button class="scenario-btn text-left p-4 bg-gray-50 hover:bg-gray-100 rounded-xl border border-gray-200 transition-colors" data-scenario="The timeline is cut in half."><div class="flex items-center gap-3"><div class="w-8 h-8 bg-accent-yellow rounded-xl flex items-center justify-center"><svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-white" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd" /></svg></div><span class="font-medium text-gray-900">Timeline cut in half</span></div></button>
                    <button class="scenario-btn text-left p-4 bg-gray-50 hover:bg-gray-100 rounded-xl border border-gray-200 transition-colors" data-scenario="They say there is no new budget available this year."><div class="flex items-center gap-3"><div class="w-8 h-8 bg-accent-green rounded-xl flex items-center justify-center"><svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-white" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M4 4a2 2 0 00-2 2v4a2 2 0 002 2V6h10a2 2 0 00-2-2H4zm2 6a2 2 0 012-2h8a2 2 0 012 2v4a2 2 0 01-2 2H8a2 2 0 01-2-2v-4zm6 4a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd" /></svg></div><span class="font-medium text-gray-900">No new budget</span></div></button>
                    <button class="scenario-btn text-left p-4 bg-gray-50 hover:bg-gray-100 rounded-xl border border-gray-200 transition-colors" data-scenario="The champion leaves the agency."><div class="flex items-center gap-3"><div class="w-8 h-8 bg-accent-purple rounded-xl flex items-center justify-center"><svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-white" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-6-3a2 2 0 11-4 0 2 2 0 014 0zm-2 4a5 5 0 00-4.546 2.916A5.986 5.986 0 0010 16a5.986 5.986 0 004.546-2.084A5 5 0 0010 11z" clip-rule="evenodd" /></svg></div><span class="font-medium text-gray-900">Champion leaves</span></div></button>
                    <button class="scenario-btn text-left p-4 bg-gray-50 hover:bg-gray-100 rounded-xl border border-gray-200 transition-colors" data-scenario="A new, unexpected competitor emerges."><div class="flex items-center gap-3"><div class="w-8 h-8 bg-accent-pink rounded-xl flex items-center justify-center"><svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-white" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd" /></svg></div><span class="font-medium text-gray-900">New competitor</span></div></button>
                </div>
                <div id="red-team-review-container"><button id="red-team-btn" class="w-full bg-red-600 hover:bg-red-700 text-white font-medium py-3 px-4 rounded-xl transition-colors flex items-center justify-center gap-2">Red Team My Plan</button></div>
            </div>
            <div class="mt-8 flex flex-col sm:flex-row gap-3">
                <button id="copy-btn" class="flex-1 bg-primary hover:bg-blue-700 text-white font-medium py-3 px-4 rounded-xl transition-colors flex items-center justify-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path d="M8 2a1 1 0 000 2h2a1 1 0 100-2H8z" /><path d="M3 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v6h-4.586l1.293-1.293a1 1 0 00-1.414-1.414l-3 3a1 1 0 000 1.414l3 3a1 1 0 001.414-1.414L10.414 13H15v3a2 2 0 01-2 2H5a2 2 0 01-2-2V5zM15 11h2a1 1 0 110 2h-2v-2z" /></svg>Copy Plan</button>
                <button id="reset-btn" class="flex-1 bg-white hover:bg-gray-50 text-gray-700 font-medium py-3 px-4 rounded-xl border border-gray-200 transition-colors flex items-center justify-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-500" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z" clip-rule="evenodd" /></svg>Start Over</button>
            </div>`;
            
            // Set up event listeners for dynamically created elements
            document.getElementById('reset-btn').addEventListener('click', resetForm);
            document.getElementById('copy-btn').addEventListener('click', copyPlanToClipboard);
            document.getElementById('red-team-btn').addEventListener('click', (e) => handleRedTeamReview(e.currentTarget));
            document.querySelectorAll('.scenario-btn').forEach(btn => {
                btn.addEventListener('click', (e) => handleScenario(e.currentTarget.dataset.scenario, e.currentTarget));
            });
            document.querySelectorAll('.copy-snippet-btn').forEach(btn => {
                btn.addEventListener('click', copySnippet);
            });
        };

        const resetForm = () => {
            situationInput.value = '';
            originalSituation = '';
            resultsContainer.innerHTML = '';
            window.scrollTo({ top: 0, behavior: 'smooth' });
        };
        
        const handleApiError = (error) => {
             console.error("API Error:", error);
             resultsContainer.innerHTML = `<div class="text-center p-8 bg-red-50 border border-red-200 rounded-xl"><svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 mx-auto text-red-500 mb-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg><p class="text-red-700 font-medium">Something went wrong</p><p class="text-red-600 text-sm mt-1">Please try again in a moment</p></div>`;
        };

        const copyPlanToClipboard = () => {
            const planContainer = document.getElementById('coaching-plan-container');
            if (!planContainer) return;
            const recommendation = planContainer.querySelector('.bg-primary p').textContent.trim();
            let fullText = `${recommendation}\n\n--- DETAILED PLAN ---\n\n`;
            const personaCards = document.querySelectorAll('.persona-card');
            personaCards.forEach(card => {
                const persona = card.querySelector('h2').textContent.trim();
                const goal = card.querySelector('.border.p-4 p').textContent.trim();
                const points = Array.from(card.querySelectorAll('ul li span')).map(span => `- ${span.textContent.trim()}`).join('\n');
                const snippet = card.querySelector('.snippet-text')?.textContent.trim() || 'No snippet available.';
                fullText += `--- ${persona.toUpperCase()} ---\n\n`;
                fullText += `SMART GOAL:\n${goal}\n\n`;
                fullText += `KEY TALKING POINTS:\n${points}\n\n`;
                fullText += `SUGGESTED SNIPPET:\n${snippet}\n\n`;
            });
            navigator.clipboard.writeText(fullText.trim()).then(() => {
                const copyBtn = document.getElementById('copy-btn');
                const originalHtml = copyBtn.innerHTML;
                copyBtn.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" /></svg>Copied!`;
                setTimeout(() => { copyBtn.innerHTML = originalHtml; }, 2000);
            });
        };

        const copySnippet = (e) => {
            const button = e.currentTarget;
            const textToCopy = button.dataset.text;
            navigator.clipboard.writeText(textToCopy).then(() => {
                const originalIcon = button.innerHTML;
                button.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-green-600" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" /></svg>`;
                setTimeout(() => { button.innerHTML = originalIcon; }, 2000);
            });
        };

        const handleShare = () => {
            const shareText = "Just got some good sales advice from AskArti. Not bad for a free tool.";
            const shareUrl = window.location.href;
            const fullShareText = `${shareText} ${shareUrl}`;
            
            if (navigator.share) {
                navigator.share({
                    title: 'AskArti - AI Sales Advice',
                    text: shareText,
                    url: shareUrl
                });
            } else {
                navigator.clipboard.writeText(fullShareText).then(() => {
                    const shareBtn = document.getElementById('share-btn');
                    const originalText = shareBtn.textContent;
                    shareBtn.textContent = 'Copied!';
                    setTimeout(() => {
                        shareBtn.textContent = originalText;
                    }, 2000);
                });
            }
        };
        
        const openModal = (modal, content) => {
            modal.classList.remove('hidden');
            setTimeout(() => {
                modal.classList.add('show');
                content.classList.add('show');
            }, 10);
        };
        
        const closeModal = (modal, content) => {
            modal.classList.remove('show');
            content.classList.remove('show');
            setTimeout(() => { modal.classList.add('hidden'); }, 200);
        };

        // --- Event Listeners ---
        generateBtn.addEventListener('click', generatePlan);
        document.querySelectorAll('.prompt-btn').forEach(btn => {
            btn.addEventListener('click', handleCannedPrompt);
        });
        
        // Modal Event Listeners
        trustBtn.addEventListener('click', () => openModal(trustModal, trustModalContent));
        closeTrustModalBtn.addEventListener('click', () => closeModal(trustModal, trustModalContent));
        trustModal.addEventListener('click', (e) => {
            if(e.target === trustModal) {
                closeModal(trustModal, trustModalContent);
            }
        });

        sponsorBtn.addEventListener('click', () => openModal(sponsorModal, sponsorModalContent));
        closeSponsorModalBtn.addEventListener('click', () => closeModal(sponsorModal, sponsorModalContent));
        sponsorModal.addEventListener('click', (e) => {
            if(e.target === sponsorModal) {
                closeModal(sponsorModal, sponsorModalContent);
            }
        });
		humanBtn.addEventListener('click', () => openModal(humanModal, humanModalContent));
closeHumanModalBtn.addEventListener('click', () => closeModal(humanModal, humanModalContent));
humanModal.addEventListener('click', (e) => {
    if(e.target === humanModal) {
        closeModal(humanModal, humanModalContent);
    }
});
        // Share button event listener
        document.getElementById('share-btn').addEventListener('click', handleShare);

        // Escape key to close modals
        document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') {
        if (!trustModal.classList.contains('hidden')) {
            closeModal(trustModal, trustModalContent);
        }
        if (!sponsorModal.classList.contains('hidden')) {
            closeModal(sponsorModal, sponsorModalContent);
        }
        if (!humanModal.classList.contains('hidden')) {
            closeModal(humanModal, humanModalContent);
        }
    }
});

        // Sponsor banner close functionality
        document.addEventListener('DOMContentLoaded', function() {
            const sponsorBanner = document.querySelector('.sponsor-banner');
            const closeBtn = sponsorBanner?.querySelector('button');
            
            if (closeBtn) {
                closeBtn.addEventListener('click', function() {
                    sponsorBanner.style.display = 'none';
                });
            }
        });
    </script>
</body>
</html>