<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AskArti - Federal Sales Coach | Get Unstuck in 60 Seconds</title>
    <meta name="description" content="Real federal sales advice from someone who's actually sold to the government. Get unstuck on deals, prep for meetings, crush interviews. No BS, just tactics that work.">
    <meta name="keywords" content="federal sales, government sales, deal coaching, sales tactics, federal contractors, govcon">
    <meta name="author" content="Mark">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://askarti.com">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://askarti.com/">
    <meta property="og:title" content="AskArti - Federal Sales Coach">
    <meta property="og:description" content="Real federal sales advice from someone who's actually sold to the government. Get unstuck in 60 seconds.">
    <meta property="og:image" content="https://askarti.com/images/asklite.png">
    <meta property="og:image:alt" content="AskArti Logo">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:url" content="https://askarti.com/">
    <meta name="twitter:title" content="AskArti - Federal Sales Coach">
    <meta name="twitter:description" content="Real federal sales advice. Get unstuck in 60 seconds.">
    <meta name="twitter:image" content="https://askarti.com/images/asklite.png">
    <meta name="twitter:image:alt" content="AskArti Logo">
    <link rel="icon" href="/images/favicon.ico" sizes="any">
    <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
    <link rel="apple-touch-icon" href="/images/apple-touch-icon.png">
    <link rel="manifest" href="/site.webmanifest">
    <meta name="theme-color" content="#523f9e">
    <link rel="icon" type="image/png" sizes="192x192" href="/images/android-chrome-192x192.png">
    <link rel="icon" type="image/png" sizes="512x512" href="/images/android-chrome-512x512.png">
    <link rel="preconnect" href="https://cdn.tailwindcss.com">
    <link rel="preconnect" href="https://cdn.jsdelivr.net">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preload" href="/images/asklite.png" as="image">
    <link rel="preload" href="/images/arti_right.png" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js" defer></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" media="print" onload="this.media='all'">
    <noscript><link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet"></noscript>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-WLGEPY5H4G"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-WLGEPY5H4G');
    </script>
    <script>
        tailwind.config = {
            content: ['./**/*.{html,js}'],
            theme: {
                extend: {
                    colors: {
                        primary: '#523f9e',
                        customPurple: {
                            100: '#978bc4',
                            200: '#7465b1',
                            500: '#523f9e',
                            700: '#41327e',
                            900: '#31255e'
                        }
                    }
                }
            }
        }
    </script>
    <script type="module">
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
        window.mermaid = mermaid;
        mermaid.initialize({
            startOnLoad: false,
            theme: 'base',
            themeVariables: {
                primaryColor: '#e9e5f5',
                primaryTextColor: '#31255e',
                primaryBorderColor: '#523f9e',
                lineColor: '#7465b1', 
                secondaryColor: '#f3f4f6',
                tertiaryColor: '#e9e5f5'
            }
        });
    </script>
    <style>
        /* Critical CSS */
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }
        .loader {
            border: 2px solid #e5e7eb;
            border-top: 2px solid #523f9e;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        /* Smooth transitions */
        .fade-in {
            animation: fadeIn 0.3s ease-in;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        /* Action card hover */
        .action-card {
            transition: all 0.2s ease;
            cursor: pointer;
        }
        .action-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }
        /* Quick prompt buttons */
        .quick-prompt {
            transition: all 0.2s ease;
            white-space: nowrap;
        }
        .quick-prompt:hover {
            background-color: rgba(82, 63, 158, 0.1);
            transform: scale(1.05);
        }
        /* Mermaid diagram styling */
        .mermaid {
            display: flex;
            justify-content: center;
            background: #f9fafb;
            border-radius: 0.75rem;
            padding: 1.5rem;
            margin: 1rem 0;
            overflow-x: auto;
        }
        .mermaid svg {
            max-width: 100%;
            height: auto;
        }
        /* Copy button styling */
        .copy-btn {
            transition: all 0.2s ease;
        }
        .copy-btn:hover {
            transform: scale(1.05);
        }
        .copy-success {
            animation: copyPulse 0.6s ease;
        }
        @keyframes copyPulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        @media (max-width: 640px) {
            .mermaid {
                padding: 1rem;
                font-size: 0.875rem;
            }
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-900">
    <div class="max-w-screen-lg mx-auto px-4 sm:px-6 lg:px-8 pt-4 pb-20">
        <!-- Header -->
        <header class="text-center mb-6">
            <a href="/" aria-label="AskArti Home" class="inline-block">
                <img src="/images/asklite.png" alt="AskArti" class="h-16 w-auto md:h-20 lg:h-24">
            </a>
            <p class="text-gray-600 mt-2 text-sm md:text-base">Real federal sales advice. Get unstuck in 60 seconds.</p>
        </header>

        <!-- Main Input Section -->
        <main class="bg-white rounded-xl border border-gray-200 p-6 mb-6 shadow-sm">
            <div class="mb-4">
                <label for="situation-input" class="block text-lg font-semibold text-gray-900 mb-2 text-center">
                    What's blocking your deal?
                </label>
                <textarea 
                    id="situation-input" 
                    rows="3" 
                    class="w-full p-4 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary resize-none placeholder-gray-500"
                    placeholder="Champion ghosted me after seeing pricing. $2M deal at DHS. Q4 commit."></textarea>
            </div>

            <!-- Quick Prompts -->
            <div class="flex flex-wrap gap-2 justify-center mb-4">
                <button class="quick-prompt px-3 py-1.5 bg-gray-100 hover:bg-gray-200 rounded-full text-sm text-gray-700 font-medium"
                        data-text="My champion at VA went dark after I sent our SOW. It's a $1.5M cloud migration deal. The CISO loves our competitor and I think he's poisoning the well. Q4 is shot if I lose this.">
                    Champion went dark
                </button>
                <button class="quick-prompt px-3 py-1.5 bg-gray-100 hover:bg-gray-200 rounded-full text-sm text-gray-700 font-medium"
                        data-text="Our demo crashed during the technical evaluation at DOJ. The whole team saw it fail. My champion looks like an idiot and the lead engineer called our solution 'vaporware'. This was supposed to close this quarter.">
                    Demo crashed & burned
                </button>
                <button class="quick-prompt px-3 py-1.5 bg-gray-100 hover:bg-gray-200 rounded-full text-sm text-gray-700 font-medium"
                        data-text="Large SI is squeezing us for 30% margin on a DHS deal. Government knows they're overcharging. SI threatening to go with a competitor if we don't cave. Contract starts in 3 weeks.">
                    Prime squeezing margin
                </button>
                <button class="quick-prompt px-3 py-1.5 bg-gray-100 hover:bg-gray-200 rounded-full text-sm text-gray-700 font-medium"
                        data-text="Final interview at Microsoft for Fed Account Exec role next week. Need to prep STAR stories about closing complex deals and handling technical objections. What should I emphasize?">
                    Interview prep
                </button>
                <button class="quick-prompt px-3 py-1.5 bg-gray-100 hover:bg-gray-200 rounded-full text-sm text-gray-700 font-medium"
                        data-text="I sell cloud infrastructure and want to break into DHS. What programs should I target? Who are the key primes? What contract vehicles are hot?">
                    Prospect at DHS
                </button>
            </div>

            <!-- Ask Button -->
            <div class="text-center">
                <button id="ask-btn" class="bg-customPurple-500 hover:bg-customPurple-700 text-white font-semibold py-3 px-8 rounded-full transition-all inline-flex items-center gap-2 shadow-lg hover:shadow-xl">
                    <span id="btn-text">Get Arti's Take</span>
                    <div id="loader" class="loader hidden"></div>
                </button>
            </div>
        </main>

        <!-- What I Can Help With -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8">
            <div class="action-card bg-white rounded-lg border border-gray-200 p-4 text-center" data-action="deal">
                <div class="text-3xl mb-2">🎯</div>
                <h3 class="font-semibold text-gray-900 mb-1">Stuck Deals</h3>
                <p class="text-sm text-gray-600">Unblock stalled opportunities</p>
            </div>
            <div class="action-card bg-white rounded-lg border border-gray-200 p-4 text-center" data-action="meeting">
                <div class="text-3xl mb-2">📊</div>
                <h3 class="font-semibold text-gray-900 mb-1">Meeting Prep</h3>
                <p class="text-sm text-gray-600">Nail your next QBR or pitch</p>
            </div>
            <div class="action-card bg-white rounded-lg border border-gray-200 p-4 text-center" data-action="prospect">
                <div class="text-3xl mb-2">🔍</div>
                <h3 class="font-semibold text-gray-900 mb-1">Find Prospects</h3>
                <p class="text-sm text-gray-600">Target the right agencies</p>
            </div>
            <div class="action-card bg-white rounded-lg border border-gray-200 p-4 text-center" data-action="interview">
                <div class="text-3xl mb-2">💼</div>
                <h3 class="font-semibold text-gray-900 mb-1">Interview Prep</h3>
                <p class="text-sm text-gray-600">Land your next fed sales role</p>
            </div>
        </div>

        <!-- Results Container -->
        <div id="results-container" class="fade-in"></div>

        <!-- Footer -->
        <footer class="text-center mt-12 space-y-4">
            <div class="flex justify-center gap-6 text-sm">
                <button id="about-btn" class="text-customPurple-500 hover:text-customPurple-700 font-medium">About</button>
                <button id="share-btn" class="text-customPurple-500 hover:text-customPurple-700 font-medium">Share</button>
                <a href="mailto:mark@subhoo.com" class="text-customPurple-500 hover:text-customPurple-700 font-medium">Contact</a>
            </div>
            <p class="text-xs text-gray-400 max-w-2xl mx-auto">
                AskArti provides tactical advice based on real federal sales experience. Not legal or procurement advice. 
                Your data isn't stored. Built by federal sellers for federal sellers.
            </p>
            <div class="mt-4">
                <a href="https://aws.amazon.com" target="_blank" rel="noopener noreferrer">
                    <img src="https://d0.awsstatic.com/logos/powered-by-aws.png" alt="Powered by AWS" class="h-10 mx-auto opacity-50 hover:opacity-100 transition-opacity">
                </a>
            </div>
        </footer>
    </div>

    <!-- About Modal -->
    <div id="about-modal" class="hidden fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50">
        <div class="bg-white rounded-xl shadow-xl w-full max-w-md p-6">
            <div class="flex justify-between items-start mb-4">
                <h2 class="text-xl font-bold text-gray-900">Hey, I'm Mark</h2>
                <button id="close-about" class="text-gray-400 hover:text-gray-600">
                    <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                </button>
            </div>
            <div class="space-y-4 text-gray-700">
                <p>I've sold to the federal government for 20+ years. Been the mission owner, the COTR, and the seller.</p>
                <p>Built AskArti because I got tired of generic sales advice that doesn't understand how federal actually works.</p>
                <p>This is the coach I wish I had when I was grinding out deals at 11:47pm on September 30th.</p>
                <div class="pt-4 border-t">
                    <a href="https://calendly.com/markflournoy/30min" target="_blank" 
                       class="block w-full bg-customPurple-500 hover:bg-customPurple-700 text-white font-medium py-3 px-4 rounded-lg text-center transition-colors">
                        Want to talk federal sales? Let's chat →
                    </a>
                </div>
            </div>
        </div>
    </div>

    <script>
    // DOM Elements
    const situationInput = document.getElementById('situation-input');
    const askBtn = document.getElementById('ask-btn');
    const btnText = document.getElementById('btn-text');
    const loader = document.getElementById('loader');
    const resultsContainer = document.getElementById('results-container');
    const aboutBtn = document.getElementById('about-btn');
    const aboutModal = document.getElementById('about-modal');
    const closeAbout = document.getElementById('close-about');
    const shareBtn = document.getElementById('share-btn');

    const API_ENDPOINT = 'https://vd823jgh0a.execute-api.us-east-1.amazonaws.com/prod/AskArtiAPI';

    // Quick prompt handling
    document.querySelectorAll('.quick-prompt').forEach(btn => {
        btn.addEventListener('click', (e) => {
            situationInput.value = e.target.dataset.text;
            askBtn.click();
        });
    });

    // Action card handling
    document.querySelectorAll('.action-card').forEach(card => {
        card.addEventListener('click', (e) => {
            const action = e.currentTarget.dataset.action;
            const prompts = {
                deal: "My champion at [AGENCY] went dark after [EVENT]. It's a $[AMOUNT] [SOLUTION] deal. [BLOCKER]. Need to save this for Q[#].",
                meeting: "Preparing for [TYPE] meeting at [AGENCY] next week. [STAKEHOLDERS] will be there. They care about [PRIORITY]. How should I position our [SOLUTION]?",
                prospect: "I sell [SOLUTION] and want to break into [AGENCY]. What programs should I target? Who are the key contractors? What contract vehicles should I pursue?",
                interview: "Interviewing for [ROLE] at [COMPANY] focused on federal. They want someone who can [REQUIREMENT]. How should I position my experience with [ACHIEVEMENT]?"
            };
            situationInput.value = prompts[action];
            situationInput.focus();
        });
    });

    // Show/hide loader
    const setLoading = (loading) => {
        btnText.style.display = loading ? 'none' : 'inline';
        loader.style.display = loading ? 'block' : 'none';
        askBtn.disabled = loading;
    };

    // Get advice
    const getAdvice = async () => {
        const situation = situationInput.value.trim();
        if (!situation) {
            resultsContainer.innerHTML = `
                <div class="bg-red-50 border border-red-200 rounded-lg p-4 text-center">
                    <p class="text-red-700 font-medium">Drop your situation in the box above 👆</p>
                </div>`;
            return;
        }

        setLoading(true);
        resultsContainer.innerHTML = `
            <div class="text-center py-8">
                <img src="/images/arti_right.png" alt="Arti thinking" class="h-16 w-16 mx-auto mb-4 opacity-50 animate-pulse">
                <p class="text-gray-600">Analyzing your situation...</p>
            </div>`;

        try {
            const response = await fetch(API_ENDPOINT, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ situation })
            });

            if (!response.ok) throw new Error('API Error');
            
            const data = await response.json();
            displayAdvice(data);
        } catch (error) {
            console.error('Error:', error);
            resultsContainer.innerHTML = `
                <div class="bg-red-50 border border-red-200 rounded-lg p-6 text-center">
                    <p class="text-red-700 font-medium mb-2">Couldn't connect to Arti</p>
                    <p class="text-red-600 text-sm">Try again in a second</p>
                </div>`;
        } finally {
            setLoading(false);
        }
    };

    // Parse and render Mermaid diagram
    const renderMermaidDiagram = (diagramString) => {
        if (!diagramString) return '';
        
        // Split explanation from diagram code
        const parts = diagramString.split('```mermaid');
        let explanation = '';
        let diagramCode = '';
        
        if (parts.length > 1) {
            explanation = marked.parse(parts[0].trim());
            diagramCode = parts[1].replace(/```\s*$/, '').trim();
        } else {
            diagramCode = diagramString.replace(/^```mermaid\s*/, '').replace(/```\s*$/, '').trim();
        }
        
        const uniqueId = 'mermaid-' + Date.now() + '-' + Math.random().toString(36).substr(2, 9);
        
        return `
            <div class="bg-white rounded-xl border border-gray-200 p-6 shadow-sm">
                <h3 class="font-bold text-gray-900 mb-2 flex items-center gap-2">
                    <span class="text-2xl">📊</span> Visual Strategy
                </h3>
                ${explanation ? `<div class="text-sm text-gray-600 mb-3">${explanation}</div>` : ''}
                <div class="mermaid" id="${uniqueId}">
                    ${diagramCode}
                </div>
            </div>
        `;
    };

    // Initialize Mermaid diagrams
    const initializeMermaidDiagrams = () => {
        if (typeof window.mermaid !== 'undefined') {
            try {
                window.mermaid.run({
                    nodes: document.querySelectorAll('.mermaid')
                });
            } catch (e) {
                console.error("Mermaid rendering error:", e);
            }
        }
    };

    // Display advice based on response type
    const displayAdvice = (data) => {
        // Handle different response structures based on type
        if (data.federal_competitors || data.naics_codes) {
            displayProspectingAdvice(data);
        } else if (data.federal_differentiators) {
            displayInterviewAdvice(data);
        } else {
            displayStandardAdvice(data);
        }
    };

    // Display standard sales/meeting advice
    const displayStandardAdvice = (data) => {
        const { high_level_recommendation, tldr_summary, coaching_plan, mermaid_diagram } = data;

        let html = `
            <!-- Quick Take -->
            <div class="bg-gradient-to-r from-customPurple-100/30 to-customPurple-100/10 rounded-xl p-6 mb-6 border border-customPurple-100/50">
                <div class="flex items-start gap-4">
                    <img src="/images/arti_right.png" alt="Arti" class="h-12 w-12 flex-shrink-0">
                    <div class="w-full">
                        <h3 class="text-lg font-bold text-customPurple-900 mb-2">Here's what I'd do</h3>
                        <div class="text-gray-800 space-y-2">${marked.parse(high_level_recommendation || '')}</div>
                    </div>
                </div>
            </div>

            <!-- TL;DR -->
            ${tldr_summary ? `
            <div class="bg-white rounded-xl border border-gray-200 p-4 mb-6 shadow-sm">
                <h3 class="font-semibold text-gray-900 mb-2 flex items-center gap-2">
                    <span class="bg-customPurple-500 text-white text-xs font-bold px-2 py-1 rounded">TL;DR</span>
                </h3>
                <div class="text-sm text-gray-700">${marked.parse(tldr_summary)}</div>
            </div>
            ` : ''}

            <!-- Mermaid Diagram -->
            ${mermaid_diagram ? renderMermaidDiagram(mermaid_diagram) : ''}

            <!-- Coaching Plan -->
            ${coaching_plan && coaching_plan.length > 0 ? `
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-6">
                ${coaching_plan.map((plan, i) => `
                    <div class="bg-white rounded-xl border border-gray-200 p-6 shadow-sm">
                        <div class="flex items-start gap-3 mb-4">
                            <div class="bg-customPurple-500 w-10 h-10 rounded-xl text-white flex-shrink-0 flex items-center justify-center">
                                <span class="font-bold">${plan.persona.charAt(0)}</span>
                            </div>
                            <h2 class="text-lg font-semibold text-gray-900">${plan.persona}</h2>
                        </div>
                        
                        <div class="space-y-4">
                            <div class="bg-customPurple-100/20 border border-customPurple-100/40 p-4 rounded-xl">
                                <h3 class="font-medium text-customPurple-700 mb-2">SMART Goal</h3>
                                <p class="text-gray-700">${marked.parse(plan.smart_goal).replace(/<\/?p>/g, '')}</p>
                            </div>
                            
                            ${plan.talking_points && plan.talking_points.length > 0 ? `
                            <div>
                                <h3 class="font-medium text-gray-900 mb-3">Key Talking Points</h3>
                                <ul class="space-y-2">
                                    ${plan.talking_points.map(point => `
                                        <li class="flex items-start gap-2">
                                            <svg class="w-5 h-5 text-customPurple-500 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                                                <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                                            </svg>
                                            <span class="text-gray-700">${marked.parse(point).replace(/<\/?p>/g, '')}</span>
                                        </li>
                                    `).join('')}
                                </ul>
                            </div>
                            ` : ''}
                            
                            ${plan.suggested_snippet ? `
                            <div class="mt-4 pt-4 border-t border-gray-200">
                                <h3 class="font-medium text-gray-900 mb-2 flex items-center gap-2">
                                    <svg class="w-4 h-4 text-gray-400" viewBox="0 0 20 20" fill="currentColor">
                                        <path d="M8 2a1 1 0 000 2h2a1 1 0 100-2H8z" />
                                        <path d="M3 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v6h-4.586l1.293-1.293a1 1 0 00-1.414-1.414l-3 3a1 1 0 000 1.414l3 3a1 1 0 001.414-1.414L10.414 13H15v3a2 2 0 01-2 2H5a2 2 0 01-2-2V5z" />
                                    </svg>
                                    Suggested Message
                                </h3>
                                <div class="relative bg-gray-50 p-3 rounded-lg border border-gray-200">
                                    <p class="text-sm text-gray-700 whitespace-pre-wrap snippet-text">${plan.suggested_snippet}</p>
                                    <button class="copy-btn copy-snippet absolute top-2 right-2 p-1.5 bg-white hover:bg-gray-100 rounded-full transition-colors" 
                                            data-text="${plan.suggested_snippet.replace(/"/g, '&quot;')}" 
                                            title="Copy snippet">
                                        <svg class="w-4 h-4 text-gray-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
                                        </svg>
                                    </button>
                                </div>
                            </div>
                            ` : ''}
                        </div>
                    </div>
                `).join('')}
            </div>
            ` : ''}

            <!-- Actions -->
            <div class="mt-8 flex flex-col sm:flex-row gap-3">
                <button onclick="copyAll()" class="flex-1 bg-customPurple-500 hover:bg-customPurple-700 text-white font-medium py-3 px-6 rounded-lg transition-colors">
                    Copy Everything
                </button>
                <button onclick="startOver()" class="flex-1 bg-white hover:bg-gray-50 text-gray-700 font-medium py-3 px-6 rounded-lg border border-gray-200 transition-colors">
                    Ask Another Question
                </button>
            </div>
        `;

        resultsContainer.innerHTML = html;
        resultsContainer.scrollIntoView({ behavior: 'smooth', block: 'start' });
        
        // Initialize copy buttons and mermaid
        initializeCopyButtons();
        setTimeout(initializeMermaidDiagrams, 100);
    };

    // Display prospecting advice
    const displayProspectingAdvice = (data) => {
        const { 
            summary, 
            company_capabilities = [],
            naics_codes = [], 
            federal_competitors = [], 
            prime_contractors = [],
            prospect_recommendations = [],
            market_insights,
            mermaid_diagram
        } = data;

        let html = `
            <!-- Summary -->
            <div class="bg-gradient-to-r from-customPurple-100/30 to-customPurple-100/10 rounded-xl p-6 mb-6 border border-customPurple-100/50">
                <div class="flex items-start gap-4">
                    <img src="/images/arti_right.png" alt="Arti" class="h-12 w-12 flex-shrink-0">
                    <div class="w-full">
                        <h3 class="text-lg font-bold text-customPurple-900 mb-2">Prospect Research & Competitive Intel</h3>
                        <div class="text-gray-800">${marked.parse(summary || '')}</div>
                    </div>
                </div>
            </div>

            <!-- Mermaid Diagram -->
            ${mermaid_diagram ? renderMermaidDiagram(mermaid_diagram) : ''}

            <!-- Core Capabilities -->
            ${company_capabilities.length > 0 ? `
            <div class="bg-white rounded-xl border border-gray-200 p-6 mb-6 shadow-sm">
                <h3 class="font-bold text-gray-900 mb-4 flex items-center gap-2">
                    <svg class="w-5 h-5 text-customPurple-500" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M6 6V5a3 3 0 013-3h2a3 3 0 013 3v1h2a2 2 0 012 2v3.57A22.952 22.952 0 0110 13a22.95 22.95 0 01-8-1.43V8a2 2 0 012-2h2zm2-1a1 1 0 011-1h2a1 1 0 011 1v1H8V5zm2 6a1 1 0 011 1v3a1 1 0 11-2 0v-3a1 1 0 011-1z" clip-rule="evenodd" />
                    </svg>
                    Core Capabilities
                </h3>
                <div class="flex flex-wrap gap-2">
                    ${company_capabilities.map(cap => `
                        <span class="px-3 py-1 bg-gray-100 rounded-full text-sm text-gray-700">
                            ${marked.parse(cap).replace(/<\/?p>/g, '')}
                        </span>
                    `).join('')}
                </div>
            </div>
            ` : ''}

            <!-- NAICS and Recommendations Grid -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                ${naics_codes.length > 0 ? `
                <div class="bg-white rounded-xl border border-gray-200 p-6 shadow-sm">
                    <h3 class="font-bold text-gray-900 mb-4 flex items-center gap-2">
                        <svg class="w-5 h-5 text-customPurple-500" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd" />
                        </svg>
                        Relevant NAICS Codes
                    </h3>
                    <ul class="space-y-2">
                        ${naics_codes.map(code => `
                            <li class="text-sm text-gray-700">
                                <span class="font-medium">${marked.parse(code).replace(/<\/?p>/g, '')}</span>
                            </li>
                        `).join('')}
                    </ul>
                </div>
                ` : ''}

                ${prospect_recommendations.length > 0 ? `
                <div class="bg-white rounded-xl border border-gray-200 p-6 shadow-sm">
                    <h3 class="font-bold text-gray-900 mb-4 flex items-center gap-2">
                        <svg class="w-5 h-5 text-customPurple-500" viewBox="0 0 20 20" fill="currentColor">
                            <path d="M13 7H7v6h6V7z" />
                            <path fill-rule="evenodd" d="M7 2a1 1 0 012 0v1h2V2a1 1 0 112 0v1h2a2 2 0 012 2v2h1a1 1 0 110 2h-1v2h1a1 1 0 110 2h-1v2a2 2 0 01-2 2h-2v1a1 1 0 11-2 0v-1H9v1a1 1 0 11-2 0v-1H5a2 2 0 01-2-2v-2H2a1 1 0 110-2h1V9H2a1 1 0 010-2h1V5a2 2 0 012-2h2V2z" clip-rule="evenodd" />
                        </svg>
                        Prospect Recommendations
                    </h3>
                    <ul class="space-y-3">
                        ${prospect_recommendations.map(rec => `
                            <li class="text-sm text-gray-700 flex items-start gap-2">
                                <span class="text-customPurple-500 mt-0.5">•</span>
                                <span>${marked.parse(rec).replace(/<\/?p>/g, '')}</span>
                            </li>
                        `).join('')}
                    </ul>
                </div>
                ` : ''}
            </div>

            <!-- Federal Competitors -->
            ${federal_competitors.length > 0 ? `
            <div class="bg-white rounded-xl border border-gray-200 p-6 mb-6 shadow-sm">
                <h3 class="font-bold text-gray-900 mb-4 flex items-center gap-2">
                    <svg class="w-5 h-5 text-customPurple-500" viewBox="0 0 20 20" fill="currentColor">
                        <path d="M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z" />
                    </svg>
                    Federal Competitors & Players
                </h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    ${federal_competitors.map(comp => `
                        <div class="border-l-4 border-customPurple-200 pl-4">
                            <h4 class="font-semibold text-gray-900">${comp.company}</h4>
                            <p class="text-sm text-gray-600 mt-1">${marked.parse(comp.strengths).replace(/<\/?p>/g, '')}</p>
                            ${comp.contract_vehicles ? `
                                <p class="text-xs text-gray-500 mt-1">Vehicles: ${comp.contract_vehicles}</p>
                            ` : ''}
                            ${comp.weakness ? `
                                <p class="text-xs text-red-600 mt-1">Weakness: ${comp.weakness}</p>
                            ` : ''}
                        </div>
                    `).join('')}
                </div>
            </div>
            ` : ''}

            <!-- Prime Contractors -->
            ${prime_contractors.length > 0 ? `
            <div class="bg-white rounded-xl border border-gray-200 p-6 mb-6 shadow-sm">
                <h3 class="font-bold text-gray-900 mb-4 flex items-center gap-2">
                    <svg class="w-5 h-5 text-customPurple-500" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd" />
                    </svg>
                    Prime Contractors & Partners
                </h3>
                <div class="space-y-3">
                    ${prime_contractors.map(prime => `
                        <div>
                            <div class="flex items-start gap-2">
                                <span class="font-semibold text-gray-900">${prime.company}:</span>
                                <span class="text-sm text-gray-600">${marked.parse(prime.relationship).replace(/<\/?p>/g, '')}</span>
                            </div>
                            ${prime.partnership_angle ? `
                                <p class="text-sm text-customPurple-600 mt-1 ml-4">→ ${prime.partnership_angle}</p>
                            ` : ''}
                        </div>
                    `).join('')}
                </div>
            </div>
            ` : ''}

            <!-- Market Insights -->
            ${market_insights ? `
            <div class="bg-customPurple-100/20 rounded-xl border border-customPurple-100/40 p-6 mb-6">
                <h3 class="font-bold text-customPurple-800 mb-3 flex items-center gap-2">
                    <svg class="w-5 h-5" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd" />
                    </svg>
                    Market Insight
                </h3>
                <div class="text-customPurple-900">${marked.parse(market_insights)}</div>
            </div>
            ` : ''}

            <!-- Actions -->
            <div class="mt-8 flex flex-col sm:flex-row gap-3">
                <button onclick="copyAll()" class="flex-1 bg-customPurple-500 hover:bg-customPurple-700 text-white font-medium py-3 px-6 rounded-lg transition-colors">
                    Copy Research
                </button>
                <button onclick="startOver()" class="flex-1 bg-white hover:bg-gray-50 text-gray-700 font-medium py-3 px-6 rounded-lg border border-gray-200 transition-colors">
                    New Search
                </button>
            </div>
        `;

        resultsContainer.innerHTML = html;
        resultsContainer.scrollIntoView({ behavior: 'smooth', block: 'start' });
        
        // Initialize mermaid
        setTimeout(initializeMermaidDiagrams, 100);
    };

    // Display interview advice
    const displayInterviewAdvice = (data) => {
        const { 
            high_level_recommendation, 
            tldr_summary, 
            coaching_plan = [],
            federal_differentiators = [],
            mermaid_diagram
        } = data;

        let html = `
            <!-- High Level Recommendation -->
            <div class="bg-gradient-to-r from-customPurple-100/30 to-customPurple-100/10 rounded-xl p-6 mb-6 border border-customPurple-100/50">
                <div class="flex items-start gap-4">
                    <img src="/images/arti_right.png" alt="Arti" class="h-12 w-12 flex-shrink-0">
                    <div class="w-full">
                        <h3 class="text-lg font-bold text-customPurple-900 mb-2">Interview Game Plan</h3>
                        <div class="text-gray-800 space-y-2">${marked.parse(high_level_recommendation || '')}</div>
                    </div>
                </div>
            </div>

            <!-- TL;DR -->
            ${tldr_summary ? `
            <div class="bg-white rounded-xl border border-gray-200 p-4 mb-6 shadow-sm">
                <h3 class="font-semibold text-gray-900 mb-2 flex items-center gap-2">
                    <span class="bg-customPurple-500 text-white text-xs font-bold px-2 py-1 rounded">TL;DR</span>
                </h3>
                <div class="text-sm text-gray-700">${marked.parse(tldr_summary)}</div>
            </div>
            ` : ''}

            <!-- Federal Differentiators -->
            ${federal_differentiators.length > 0 ? `
            <div class="bg-customPurple-100/20 rounded-xl border border-customPurple-100/40 p-6 mb-6">
                <h3 class="font-bold text-customPurple-800 mb-4 flex items-center gap-2">
                    <svg class="w-5 h-5" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
                    </svg>
                    What Makes Federal Sellers Different
                </h3>
                <ul class="space-y-2">
                    ${federal_differentiators.map(diff => `
                        <li class="flex items-start gap-2">
                            <span class="text-customPurple-500 mt-0.5">•</span>
                            <span class="text-customPurple-900">${diff}</span>
                        </li>
                    `).join('')}
                </ul>
            </div>
            ` : ''}

            <!-- Mermaid Diagram -->
            ${mermaid_diagram ? renderMermaidDiagram(mermaid_diagram) : ''}

            <!-- Mock Interview Questions -->
            ${coaching_plan.length > 0 ? `
            <div class="space-y-6 mt-6">
                <h3 class="text-lg font-bold text-gray-900">Mock Interview Questions & STAR Answers</h3>
                ${coaching_plan.map((question, i) => `
                    <div class="bg-white rounded-xl border border-gray-200 p-6 shadow-sm">
                        <div class="mb-4">
                            <span class="bg-customPurple-100 text-customPurple-700 text-xs font-semibold px-2 py-1 rounded">Question ${i + 1}</span>
                            <h4 class="text-lg font-semibold text-gray-900 mt-2">${question.persona}</h4>
                        </div>
                        
                        ${question.smart_goal ? `
                        <div class="bg-yellow-50 border border-yellow-200 p-3 rounded-lg mb-4">
                            <p class="text-sm text-yellow-800">
                                <strong>What they're really testing:</strong> ${question.smart_goal}
                            </p>
                        </div>
                        ` : ''}
                        
                        ${question.talking_points && question.talking_points.length > 0 ? `
                        <div class="space-y-2 mb-4">
                            <h5 class="font-medium text-gray-900">STAR Answer:</h5>
                            <div class="space-y-1">
                                ${question.talking_points.map(point => {
                                    const [prefix, ...content] = point.split(':');
                                    const label = prefix.trim();
                                    const text = content.join(':').trim();
                                    const colors = {
                                        'S': 'bg-blue-50 text-blue-700 border-blue-200',
                                        'T': 'bg-green-50 text-green-700 border-green-200',
                                        'A': 'bg-purple-50 text-purple-700 border-purple-200',
                                        'R': 'bg-orange-50 text-orange-700 border-orange-200'
                                    };
                                    const colorClass = colors[label] || 'bg-gray-50 text-gray-700 border-gray-200';
                                    
                                    return `
                                        <div class="${colorClass} p-3 rounded-lg border">
                                            <strong>${label}:</strong> ${text}
                                        </div>
                                    `;
                                }).join('')}
                            </div>
                        </div>
                        ` : ''}
                        
                        ${question.suggested_snippet ? `
                        <div class="bg-customPurple-100/20 border border-customPurple-100/40 p-3 rounded-lg">
                            <p class="text-sm text-customPurple-900">
                                <strong>Pro tip:</strong> ${question.suggested_snippet}
                            </p>
                        </div>
                        ` : ''}
                    </div>
                `).join('')}
            </div>
            ` : ''}

            <!-- Actions -->
            <div class="mt-8 flex flex-col sm:flex-row gap-3">
                <button onclick="copyAll()" class="flex-1 bg-customPurple-500 hover:bg-customPurple-700 text-white font-medium py-3 px-6 rounded-lg transition-colors">
                    Copy Interview Prep
                </button>
                <button onclick="startOver()" class="flex-1 bg-white hover:bg-gray-50 text-gray-700 font-medium py-3 px-6 rounded-lg border border-gray-200 transition-colors">
                    Ask Another Question
                </button>
            </div>
        `;

        resultsContainer.innerHTML = html;
        resultsContainer.scrollIntoView({ behavior: 'smooth', block: 'start' });
        
        // Initialize mermaid
        setTimeout(initializeMermaidDiagrams, 100);
    };

    // Initialize copy buttons
    const initializeCopyButtons = () => {
        document.querySelectorAll('.copy-snippet').forEach(btn => {
            btn.addEventListener('click', (e) => {
                const text = e.currentTarget.dataset.text;
                navigator.clipboard.writeText(text).then(() => {
                    e.currentTarget.classList.add('copy-success');
                    const originalIcon = e.currentTarget.innerHTML;
                    e.currentTarget.innerHTML = `
                        <svg class="w-4 h-4 text-green-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                        </svg>
                    `;
                    setTimeout(() => {
                        e.currentTarget.innerHTML = originalIcon;
                        e.currentTarget.classList.remove('copy-success');
                    }, 2000);
                });
            });
        });
    };

    // Helper functions
    window.copyAll = () => {
        const content = resultsContainer.innerText;
        navigator.clipboard.writeText(content).then(() => {
            const btn = event.target;
            const originalText = btn.textContent;
            btn.textContent = 'Copied!';
            btn.classList.add('copy-success');
            setTimeout(() => {
                btn.textContent = originalText;
                btn.classList.remove('copy-success');
            }, 2000);
        });
    };

    window.startOver = () => {
        situationInput.value = '';
        resultsContainer.innerHTML = '';
        situationInput.focus();
        window.scrollTo({ top: 0, behavior: 'smooth' });
    };

    // Share functionality
    shareBtn.addEventListener('click', () => {
        const text = "Just got unstuck on a federal deal with AskArti:";
        const url = "https://askarti.com";
        
        if (navigator.share) {
            navigator.share({ title: 'AskArti', text, url });
        } else {
            navigator.clipboard.writeText(`${text} ${url}`);
            shareBtn.textContent = 'Link Copied!';
            setTimeout(() => { shareBtn.textContent = 'Share'; }, 2000);
        }
    });

    // Modal handling
    aboutBtn.addEventListener('click', () => aboutModal.classList.remove('hidden'));
    closeAbout.addEventListener('click', () => aboutModal.classList.add('hidden'));
    aboutModal.addEventListener('click', (e) => {
        if (e.target === aboutModal) aboutModal.classList.add('hidden');
    });

    // Event listeners
    askBtn.addEventListener('click', getAdvice);
    situationInput.addEventListener('keydown', (e) => {
        if (e.key === 'Enter' && !e.shiftKey) {
            e.preventDefault();
            getAdvice();
        }
    });

    // Focus input on load
    situationInput.focus();
    </script>
</body>
</html>